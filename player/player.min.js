var $stream,$radioTipo,myRadio=null;function startPlayer(o){function a(){$(ppBtn).removeClass("stop-btn"),$(ppBtn).removeClass("load-btn"),$(ppBtn).addClass("play-btn")}function e(){$(ppBtn).removeClass("play-btn"),$(ppBtn).removeClass("load-btn"),$(ppBtn).addClass("stop-btn")}function t(){$(ppBtn).removeClass("load-btn"),$(ppBtn).removeClass("play-btn"),$(ppBtn).removeClass("stop-btn"),$(ppBtn).addClass("error-btn")}switch($radioTipo){case"4":"1"==!$inseguro?($stream=$radioHtml+"://"+$radioURL+":"+$radioPort+$radioServ,soundManager.onready(function(){!0===(myRadio=soundManager.createSound({id:"myRadioId",url:$stream,stream:!0,forceUseGlobalHTML5Audio:!0,useHighPerformance:!0,type:"audio/mpeg",autoLoad:!0,useHTML5Audio:!0,autoPlay:AutoPlay,onerror:function(){t()},onfailure:function(){t()},onplay:function(){e()},onresume:function(){e()},onsuspend:function(){a(),myRadio.pause()},volume:o})).muted&&a(),!1===AutoPlay?!0!==playstatus||!1===myRadio.paused?(myRadio.pause(),a()):myRadio.play():!0===playstatus?!1===myRadio.paused?(myRadio.pause(),a()):myRadio.play():!0===playstatus&&myRadio.play()})):(a(),!0===playstatus&&window.open($inseguroPlayer,null,"height=800,width=650,status=yes,toolbar=no,menubar=no,location=no"));break;case"6":function r(){var a;Hls.isSupported()?((a=new Hls).loadSource($radioM3u8Html),a.attachMedia(myAudio),a.on(Hls.Events.MANIFEST_PARSED,function(){myAudio.play(),myAudio.volume=o})):myAudio.canPlayType("application/vnd.apple.mpegurl")&&(myAudio.src=$radioM3u8Html,myAudio.play(),e())}myAudio=document.getElementById("audio"),!1===AutoPlay?!0===playstatus&&myAudio.paused?r():(myAudio.pause(),a()):!0===playstatus?myAudio.paused?r():(myAudio.pause(),a()):(a(),r())}}function handleFirstPlay(a){$(ppBtn).removeClass("play-btn"),$(ppBtn).removeClass("load-btn"),$(ppBtn).addClass("stop-btn")}$(document).ready(function(){$cxdata=$cxdata.split(","),$.ajax({url:"../stream/conect.php",dataType:"json",type:"POST",async:!1,data:"cxdata="+$cxdata[1]+"&token="+$cxdata[0],success:function(a){$radioURL=a.radioURL,$radioPort=a.radioPort,$radioServ=$.trim(a.radioServ),$img=a.img,$radioName=a.radioName,$radioType=a.radioType,$radioMus=a.radioMus,$radioFor=a.radioFor,$radioTipo=a.radioTipo,$radioM3u8Html=a.radioM3u8Html,$radioHtml=a.radioHtml,$site=a.site,$siteplayer=a.siteplayer,$inseguro=a.inseguro,$inseguroPlayer=a.playerins}}),$radioName||window.location.replace(document.location.origin);var o=!(myRadio="");AutoPlay=!0;var e=this;ppBtn=$(".ppBtn",e);var t=$(".volume-slider",e),a=$(".vol-icon",e);playstatus=!1;function r(){$(t).val()<55&&0<$(t).val()&&($(a).removeClass("vol-icon3 vol-icon1"),$(a).addClass("vol-icon2")),0==$(t).val()?($(a).removeClass("vol-icon2 vol-icon3"),$(a).addClass("vol-icon1")):55<$(t).val()&&($(a).removeClass("vol-icon1 vol-icon2"),$(a).addClass("vol-icon3"))}$(t).val(100),$(".vol-value",e).text("100%"),r(),"Microsoft Internet Explorer"==navigator.appName||navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/rv:11/)||void 0!==$.browser&&1==$.browser.msie?t.change("input",function(){4==$radioTipo&&(soundManager.setVolume("myRadioId",parseInt(this.value,10)),a=soundManager.volume),6==$radioTipo&&(myAudio.volume=this.value/100,a=myAudio.volume);var a=Math.round(a);$(".vol-value",e).text(a+"%"),r()},!1):t.on("input",function(){var a=$(t).val();4==$radioTipo&&soundManager.setVolume("myRadioId",a),6==$radioTipo&&(myAudio.volume=a/100);a=Math.round(a);$(".vol-value",e).text(a+"%"),r()}),2==$radioTipo&&($(t).addClass("dis-none"),$(".vol-value").addClass("dis-none"),$(a).addClass("vol-dis"),AutoPlay=!1),/Android|webOS|iPhone|iPad|iPod|Opera Mini/i.test(navigator.userAgent)&&($(t).addClass("dis-none"),$(".vol-value").addClass("dis-none"),$(a).addClass("vol-dis"),AutoPlay=!1);var n=$("#coverHolder"),i=new Array;function d(){$.ajaxSetup({cache:!1});var a={cxdata:$cxdata[1],token:$cxdata[0]};return $.ajax({type:"POST",url:"/stream/music.php",data:a,success:function(a){a==i[0]||(""==$.trim(a)?($("#currentSong").hide(),$("#currentSong").text($radioName),$("#currentSong").fadeIn(),$("#artistName").hide(),$("#artistName").empty(),$("#coverHolder").empty(),$("#coverHolder").append('<img id="coverPreloader" width="107" src="'+$img+'"></img>')):($("#currentSong").text!=$radioName&&$("#currentSong").text($radioName),$("#artistName").hide(),$("#artistName").text(a.replace("</body></html>","")),$("#artistName").fadeIn(),i[0]=a.replace("</body></html>",""),function(){historyIS=!1;var a={cxdata:$cxdata[1],token:$cxdata[0]};""!=$("#artistName").text()&&0!=o?$.ajax({type:"POST",url:"/stream/search.php",data:a,success:function(a){a=0<=a.indexOf("<img")?(n.empty(),n.hide(),a.slice(a.indexOf("<img"))):(n.empty(),n.hide(),'<img id="coverPreloader" width="107" src="'+$img+'"></img>'),n.append(a),n.fadeIn(),$("#coverGlass").fadeIn()}}):(n.empty(),n.hide(),a=$img,n.append(a),n.fadeIn(),$("#coverGlass").fadeIn())}()))}}),!1}$("#currentSong").hide(),$("#currentSong").text("Conectando..."),$("#currentSong").fadeIn(),n.empty(),1==$radioMus?(d(),radioInfoInterval=setInterval(d,2e4)):($("#currentSong").hide(),$("#currentSong").text($radioName),$("#currentSong").fadeIn(),$("#coverHolder").empty(),1==$cxdata[1]?($("#coverHolder",e).css({"background-image":"url("+$img+")","background-size":"100% 100%"}),$("#homeweb").removeClass("hidden")):$("#coverHolder",e).css({"background-image":"url(/assets/img/player/noCover.png)","background-size":"100% 100%"})),startPlayer(100),$(ppBtn,e).on("click tap",function(){playstatus=!0,startPlayer(100)})});