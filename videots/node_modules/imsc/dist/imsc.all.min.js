/*
 The buffer module from node.js, for the browser.

 @author   Feross Aboukhadijeh <https://feross.org>
 @license  MIT
 Determine if an object is a Buffer

 @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 @license  MIT
 http://mths.be/fromcodepoint v0.1.0 by @mathias */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,u,l){c!=Array.prototype&&c!=Object.prototype&&(c[u]=l.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(c,u,l,n){if(u){l=$jscomp.global;c=c.split(".");for(n=0;n<c.length-1;n++){var b=c[n];b in l||(l[b]={});l=l[b]}c=c[c.length-1];n=l[c];u=u(n);u!=n&&null!=u&&$jscomp.defineProperty(l,c,{configurable:!0,writable:!0,value:u})}};$jscomp.polyfill("Array.prototype.fill",function(c){return c?c:function(c,l,n){var b=this.length||0;0>l&&(l=Math.max(0,b+l));if(null==n||n>b)n=b;n=Number(n);0>n&&(n=Math.max(0,b+n));for(l=Number(l||0);l<n;l++)this[l]=c;return this}},"es6","es3");
$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var c=0;return function(u){return $jscomp.SYMBOL_PREFIX+(u||"")+c++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.asyncIterator;c||(c=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.arrayIterator=function(c){var u=0;return $jscomp.iteratorPrototype(function(){return u<c.length?{done:!1,value:c[u++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.iteratorFromArray=function(c,u){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var l=0,n={next:function(){if(l<c.length){var b=l++;return{value:u(b,c[b]),done:!1}}n.next=function(){return{done:!0,value:void 0}};return n.next()}};n[Symbol.iterator]=function(){return n};return n};
$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c){return c})}},"es6","es3");$jscomp.polyfill("Object.getOwnPropertySymbols",function(c){return c?c:function(){return[]}},"es6","es5");
$jscomp.polyfill("Reflect.ownKeys",function(c){return c?c:function(c){var l=[],n=Object.getOwnPropertyNames(c);c=Object.getOwnPropertySymbols(c);for(var b=0;b<n.length;b++)("jscomp_symbol_"==n[b].substring(0,14)?c:l).push(n[b]);return l.concat(c)}},"es6","es5");
$jscomp.polyfill("String.fromCodePoint",function(c){return c?c:function(c){for(var l="",n=0;n<arguments.length;n++){var b=Number(arguments[n]);if(0>b||1114111<b||b!==Math.floor(b))throw new RangeError("invalid_code_point "+b);65535>=b?l+=String.fromCharCode(b):(b-=65536,l+=String.fromCharCode(b>>>10&1023|55296),l+=String.fromCharCode(b&1023|56320))}return l}},"es6","es3");$jscomp.polyfill("Object.is",function(c){return c?c:function(c,l){return c===l?0!==c||1/c===1/l:c!==c&&l!==l}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(c){return c?c:function(c,l){var n=this;n instanceof String&&(n=String(n));var b=n.length;l=l||0;for(0>l&&(l=Math.max(l+b,0));l<b;l++){var m=n[l];if(m===c||Object.is(m,c))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(c,u,l){if(null==c)throw new TypeError("The 'this' value for String.prototype."+l+" must not be null or undefined");if(u instanceof RegExp)throw new TypeError("First argument to String.prototype."+l+" must not be a regular expression");return c+""};$jscomp.polyfill("String.prototype.includes",function(c){return c?c:function(c,l){return-1!==$jscomp.checkStringArgs(this,c,"includes").indexOf(c,l||0)}},"es6","es3");
$jscomp.polyfill("Math.sign",function(c){return c?c:function(c){c=Number(c);return 0===c||isNaN(c)?c:0<c?1:-1}},"es6","es3");
(function(c){"object"===typeof exports&&"undefined"!==typeof module?module.exports=c():"function"===typeof define&&define.amd?define([],c):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).imsc=c()})(function(){return function(){function c(u,l,n){function b(p,v){if(!l[p]){if(!u[p]){var a="function"==typeof require&&require;if(!v&&a)return a(p,!0);if(m)return m(p,!0);v=Error("Cannot find module '"+p+"'");throw v.code="MODULE_NOT_FOUND",v;}v=
l[p]={exports:{}};u[p][0].call(v.exports,function(a){return b(u[p][1][a]||a)},v,v.exports,c,u,l,n)}return l[p].exports}for(var m="function"==typeof require&&require,p=0;p<n.length;p++)b(n[p]);return b}return c}()({1:[function(c,u,l){function n(b){var a=b.length;if(0<a%4)throw Error("Invalid string. Length must be a multiple of 4");b=b.indexOf("=");-1===b&&(b=a);return[b,b===a?0:4-b%4]}function b(b,a,h){for(var c=[],k=a;k<h;k+=3)a=(b[k]<<16&16711680)+(b[k+1]<<8&65280)+(b[k+2]&255),c.push(m[a>>18&63]+
m[a>>12&63]+m[a>>6&63]+m[a&63]);return c.join("")}l.byteLength=function(b){b=n(b);var a=b[1];return 3*(b[0]+a)/4-a};l.toByteArray=function(b){var a=n(b);var h=a[0];a=a[1];for(var c=new D(3*(h+a)/4-a),m=0,v=0<a?h-4:h,x=0;x<v;x+=4)h=p[b.charCodeAt(x)]<<18|p[b.charCodeAt(x+1)]<<12|p[b.charCodeAt(x+2)]<<6|p[b.charCodeAt(x+3)],c[m++]=h>>16&255,c[m++]=h>>8&255,c[m++]=h&255;2===a&&(h=p[b.charCodeAt(x)]<<2|p[b.charCodeAt(x+1)]>>4,c[m++]=h&255);1===a&&(h=p[b.charCodeAt(x)]<<10|p[b.charCodeAt(x+1)]<<4|p[b.charCodeAt(x+
2)]>>2,c[m++]=h>>8&255,c[m++]=h&255);return c};l.fromByteArray=function(c){for(var a=c.length,h=a%3,n=[],k=0,v=a-h;k<v;k+=16383)n.push(b(c,k,k+16383>v?v:k+16383));1===h?(c=c[a-1],n.push(m[c>>2]+m[c<<4&63]+"==")):2===h&&(c=(c[a-2]<<8)+c[a-1],n.push(m[c>>10]+m[c>>4&63]+m[c<<2&63]+"="));return n.join("")};var m=[],p=[],D="undefined"!==typeof Uint8Array?Uint8Array:Array;for(c=0;64>c;++c)m[c]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[c],p["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(c)]=
c;p[45]=62;p[95]=63},{}],2:[function(c,u,l){},{}],3:[function(c,u,l){function n(a){if(!a)return"utf8";for(var b;;)switch(a){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return a;default:if(b)return;a=(""+a).toLowerCase();b=!0}}function b(b){var c=n(b);if("string"!==typeof c&&(x.isEncoding===F||!F(b)))throw Error("Unknown encoding: "+b);this.encoding=c||
b;switch(this.encoding){case "utf16le":this.text=v;this.end=a;b=4;break;case "utf8":this.fillLast=D;b=4;break;case "base64":this.text=h;this.end=z;b=3;break;default:this.write=k;this.end=E;return}this.lastTotal=this.lastNeed=0;this.lastChar=x.allocUnsafe(b)}function m(a){return 127>=a?0:6===a>>5?2:14===a>>4?3:30===a>>3?4:2===a>>6?-1:-2}function p(a,b,d){var c=b.length-1;if(c<d)return 0;var f=m(b[c]);if(0<=f)return 0<f&&(a.lastNeed=f-1),f;if(--c<d||-2===f)return 0;f=m(b[c]);if(0<=f)return 0<f&&(a.lastNeed=
f-2),f;if(--c<d||-2===f)return 0;f=m(b[c]);return 0<=f?(0<f&&(2===f?f=0:a.lastNeed=f-3),f):0}function D(a){var b=this.lastTotal-this.lastNeed;a:if(128!==(a[0]&192)){this.lastNeed=0;var d="\ufffd"}else{if(1<this.lastNeed&&1<a.length){if(128!==(a[1]&192)){this.lastNeed=1;d="\ufffd";break a}if(2<this.lastNeed&&2<a.length&&128!==(a[2]&192)){this.lastNeed=2;d="\ufffd";break a}}d=void 0}if(void 0!==d)return d;if(this.lastNeed<=a.length)return a.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,
0,this.lastTotal);a.copy(this.lastChar,b,0,a.length);this.lastNeed-=a.length}function v(a,b){if(0===(a.length-b)%2){if(b=a.toString("utf16le",b)){var d=b.charCodeAt(b.length-1);if(55296<=d&&56319>=d)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],b.slice(0,-1)}return b}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=a[a.length-1];return a.toString("utf16le",b,a.length-1)}function a(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+this.lastChar.toString("utf16le",
0,this.lastTotal-this.lastNeed):a}function h(a,b){var d=(a.length-b)%3;if(0===d)return a.toString("base64",b);this.lastNeed=3-d;this.lastTotal=3;1===d?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]);return a.toString("base64",b,a.length-d)}function z(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+this.lastChar.toString("base64",0,3-this.lastNeed):a}function k(a){return a.toString(this.encoding)}function E(a){return a&&a.length?this.write(a):
""}var x=c("safe-buffer").Buffer,F=x.isEncoding||function(a){a=""+a;switch(a&&a.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};l.StringDecoder=b;b.prototype.write=function(a){if(0===a.length)return"";if(this.lastNeed){var b=this.fillLast(a);if(void 0===b)return"";var d=this.lastNeed;this.lastNeed=0}else d=0;return d<a.length?b?b+this.text(a,d):this.text(a,d):
b||""};b.prototype.end=function(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+"\ufffd":a};b.prototype.text=function(a,b){var d=p(this,a,b);if(!this.lastNeed)return a.toString("utf8",b);this.lastTotal=d;d=a.length-(d-this.lastNeed);a.copy(this.lastChar,0,d);return a.toString("utf8",b,d)};b.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,
this.lastTotal-this.lastNeed,0,a.length);this.lastNeed-=a.length}},{"safe-buffer":25}],4:[function(c,u,l){(function(n){var b=c("buffer"),m=b.Buffer,p=b.SlowBuffer,D=b.kMaxLength||2147483647;l.alloc=function(b,a,c){if("function"===typeof m.alloc)return m.alloc(b,a,c);if("number"===typeof c)throw new TypeError("encoding must not be number");if("number"!==typeof b)throw new TypeError("size must be a number");if(b>D)throw new RangeError("size is too large");var h=a;void 0===h&&(c=void 0,h=0);a=new m(b);
if("string"===typeof h){c=new m(h,c);h=c.length;for(var n=-1;++n<b;)a[n]=c[n%h]}else a.fill(h);return a};l.allocUnsafe=function(b){if("function"===typeof m.allocUnsafe)return m.allocUnsafe(b);if("number"!==typeof b)throw new TypeError("size must be a number");if(b>D)throw new RangeError("size is too large");return new m(b)};l.from=function(b,a,c){if("function"===typeof m.from&&(!n.Uint8Array||Uint8Array.from!==m.from))return m.from(b,a,c);if("number"===typeof b)throw new TypeError('"value" argument must not be a number');
if("string"===typeof b)return new m(b,a);if("undefined"!==typeof ArrayBuffer&&b instanceof ArrayBuffer){var h=a;if(1===arguments.length)return new m(b);"undefined"===typeof h&&(h=0);var k=c;"undefined"===typeof k&&(k=b.byteLength-h);if(h>=b.byteLength)throw new RangeError("'offset' is out of bounds");if(k>b.byteLength-h)throw new RangeError("'length' is out of bounds");return new m(b.slice(h,h+k))}if(m.isBuffer(b))return h=new m(b.length),b.copy(h,0,0,b.length),h;if(b){if(Array.isArray(b)||"undefined"!==
typeof ArrayBuffer&&b.buffer instanceof ArrayBuffer||"length"in b)return new m(b);if("Buffer"===b.type&&Array.isArray(b.data))return new m(b.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");};l.allocUnsafeSlow=function(b){if("function"===typeof m.allocUnsafeSlow)return m.allocUnsafeSlow(b);if("number"!==typeof b)throw new TypeError("size must be a number");if(b>=D)throw new RangeError("size is too large");return new p(b)}}).call(this,
"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{buffer:5}],5:[function(c,u,l){function n(e){if(e>C)throw new RangeError('The value "'+e+'" is invalid for option "size"');e=new Uint8Array(e);e.__proto__=b.prototype;return e}function b(e,g,a){if("number"===typeof e){if("string"===typeof g)throw new TypeError('The "string" argument must be of type string. Received type number');return D(e)}return m(e,g,a)}function m(e,g,d){if("string"===typeof e){var I=
g;if("string"!==typeof I||""===I)I="utf8";if(!b.isEncoding(I))throw new TypeError("Unknown encoding: "+I);g=z(e,I)|0;d=n(g);e=d.write(e,I);e!==g&&(d=d.slice(0,e));return d}if(ArrayBuffer.isView(e))return v(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(y(e,ArrayBuffer)||e&&y(e.buffer,ArrayBuffer)){if(0>g||e.byteLength<g)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<
g+(d||0))throw new RangeError('"length" is outside of buffer bounds');e=void 0===g&&void 0===d?new Uint8Array(e):void 0===d?new Uint8Array(e,g):new Uint8Array(e,g,d);e.__proto__=b.prototype;return e}if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');I=e.valueOf&&e.valueOf();if(null!=I&&I!==e)return b.from(I,g,d);if(I=a(e))return I;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return b.from(e[Symbol.toPrimitive]("string"),
g,d);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);}function p(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(0>e)throw new RangeError('The value "'+e+'" is invalid for option "size"');}function D(e){p(e);return n(0>e?0:h(e)|0)}function v(e){for(var g=0>e.length?0:h(e.length)|0,a=n(g),b=0;b<g;b+=1)a[b]=e[b]&255;return a}function a(e){if(b.isBuffer(e)){var g=
h(e.length)|0,a=n(g);if(0===a.length)return a;e.copy(a,0,0,g);return a}if(void 0!==e.length)return(g="number"!==typeof e.length)||(g=e.length,g=g!==g),g?n(0):v(e);if("Buffer"===e.type&&Array.isArray(e.data))return v(e.data)}function h(e){if(e>=C)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+C.toString(16)+" bytes");return e|0}function z(e,g){if(b.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||y(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+
typeof e);var a=e.length,d=2<arguments.length&&!0===arguments[2];if(!d&&0===a)return 0;for(var f=!1;;)switch(g){case "ascii":case "latin1":case "binary":return a;case "utf8":case "utf-8":return q(e).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*a;case "hex":return a>>>1;case "base64":return A.toByteArray(K(e)).length;default:if(f)return d?-1:q(e).length;g=(""+g).toLowerCase();f=!0}}function k(e,g,a){var b=!1;if(void 0===g||0>g)g=0;if(g>this.length)return"";if(void 0===a||
a>this.length)a=this.length;if(0>=a)return"";a>>>=0;g>>>=0;if(a<=g)return"";for(e||(e="utf8");;)switch(e){case "hex":e=g;g=a;a=this.length;if(!e||0>e)e=0;if(!g||0>g||g>a)g=a;b="";for(a=e;a<g;++a)e=b,b=this[a],b=16>b?"0"+b.toString(16):b.toString(16),b=e+b;return b;case "utf8":case "utf-8":return J(this,g,a);case "ascii":e="";for(a=Math.min(this.length,a);g<a;++g)e+=String.fromCharCode(this[g]&127);return e;case "latin1":case "binary":e="";for(a=Math.min(this.length,a);g<a;++g)e+=String.fromCharCode(this[g]);
return e;case "base64":return g=0===g&&a===this.length?A.fromByteArray(this):A.fromByteArray(this.slice(g,a)),g;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":g=this.slice(g,a);a="";for(e=0;e<g.length;e+=2)a+=String.fromCharCode(g[e]+256*g[e+1]);return a;default:if(b)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();b=!0}}function E(e,g,a){var b=e[g];e[g]=e[a];e[a]=b}function x(e,g,a,d,f){if(0===e.length)return-1;"string"===typeof a?(d=a,a=0):2147483647<a?a=2147483647:-2147483648>
a&&(a=-2147483648);a=+a;a!==a&&(a=f?0:e.length-1);0>a&&(a=e.length+a);if(a>=e.length){if(f)return-1;a=e.length-1}else if(0>a)if(f)a=0;else return-1;"string"===typeof g&&(g=b.from(g,d));if(b.isBuffer(g))return 0===g.length?-1:F(e,g,a,d,f);if("number"===typeof g)return g&=255,"function"===typeof Uint8Array.prototype.indexOf?f?Uint8Array.prototype.indexOf.call(e,g,a):Uint8Array.prototype.lastIndexOf.call(e,g,a):F(e,[g],a,d,f);throw new TypeError("val must be string, number or Buffer");}function F(e,
g,a,b,d){function f(e,g){return 1===I?e[g]:e.readUInt16BE(g*I)}var I=1,c=e.length,q=g.length;if(void 0!==b&&(b=String(b).toLowerCase(),"ucs2"===b||"ucs-2"===b||"utf16le"===b||"utf-16le"===b)){if(2>e.length||2>g.length)return-1;I=2;c/=2;q/=2;a/=2}if(d)for(b=-1;a<c;a++)if(f(e,a)===f(g,-1===b?0:a-b)){if(-1===b&&(b=a),a-b+1===q)return b*I}else-1!==b&&(a-=a-b),b=-1;else for(a+q>c&&(a=c-q);0<=a;a--){c=!0;for(b=0;b<q;b++)if(f(e,a+b)!==f(g,b)){c=!1;break}if(c)return a}return-1}function J(e,g,a){a=Math.min(e.length,
a);for(var b=[];g<a;){var d=e[g],f=null,I=239<d?4:223<d?3:191<d?2:1;if(g+I<=a)switch(I){case 1:128>d&&(f=d);break;case 2:var c=e[g+1];128===(c&192)&&(d=(d&31)<<6|c&63,127<d&&(f=d));break;case 3:c=e[g+1];var q=e[g+2];128===(c&192)&&128===(q&192)&&(d=(d&15)<<12|(c&63)<<6|q&63,2047<d&&(55296>d||57343<d)&&(f=d));break;case 4:c=e[g+1];q=e[g+2];var w=e[g+3];128===(c&192)&&128===(q&192)&&128===(w&192)&&(d=(d&15)<<18|(c&63)<<12|(q&63)<<6|w&63,65535<d&&1114112>d&&(f=d))}null===f?(f=65533,I=1):65535<f&&(f-=
65536,b.push(f>>>10&1023|55296),f=56320|f&1023);b.push(f);g+=I}e=b.length;if(e<=O)b=String.fromCharCode.apply(String,b);else{a="";for(g=0;g<e;)a+=String.fromCharCode.apply(String,b.slice(g,g+=O));b=a}return b}function B(e,g,a){if(0!==e%1||0>e)throw new RangeError("offset is not uint");if(e+g>a)throw new RangeError("Trying to access beyond buffer length");}function d(e,g,a,d,f,c){if(!b.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>f||g<c)throw new RangeError('"value" argument is out of bounds');
if(a+d>e.length)throw new RangeError("Index out of range");}function w(e,g,a,b,d,f){if(a+b>e.length)throw new RangeError("Index out of range");if(0>a)throw new RangeError("Index out of range");}function f(e,g,a,b,d){g=+g;a>>>=0;d||w(e,g,a,4,3.4028234663852886E38,-3.4028234663852886E38);L.write(e,g,a,b,23,4);return a+4}function t(e,g,a,b,d){g=+g;a>>>=0;d||w(e,g,a,8,1.7976931348623157E308,-1.7976931348623157E308);L.write(e,g,a,b,52,8);return a+8}function K(e){e=e.split("=")[0];e=e.trim().replace(Q,
"");if(2>e.length)return"";for(;0!==e.length%4;)e+="=";return e}function q(e,g){g=g||Infinity;for(var a,b=e.length,d=null,f=[],c=0;c<b;++c){a=e.charCodeAt(c);if(55295<a&&57344>a){if(!d){if(56319<a){-1<(g-=3)&&f.push(239,191,189);continue}else if(c+1===b){-1<(g-=3)&&f.push(239,191,189);continue}d=a;continue}if(56320>a){-1<(g-=3)&&f.push(239,191,189);d=a;continue}a=(d-55296<<10|a-56320)+65536}else d&&-1<(g-=3)&&f.push(239,191,189);d=null;if(128>a){if(0>--g)break;f.push(a)}else if(2048>a){if(0>(g-=2))break;
f.push(a>>6|192,a&63|128)}else if(65536>a){if(0>(g-=3))break;f.push(a>>12|224,a>>6&63|128,a&63|128)}else if(1114112>a){if(0>(g-=4))break;f.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else throw Error("Invalid code point");}return f}function M(e){for(var a=[],b=0;b<e.length;++b)a.push(e.charCodeAt(b)&255);return a}function H(e,a,b,d){for(var g=0;g<d&&!(g+b>=a.length||g>=e.length);++g)a[g+b]=e[g];return g}function y(e,a){return e instanceof a||null!=e&&null!=e.constructor&&null!=e.constructor.name&&
e.constructor.name===a.name}var A=c("base64-js"),L=c("ieee754");l.Buffer=b;l.SlowBuffer=function(e){+e!=e&&(e=0);return b.alloc(+e)};l.INSPECT_MAX_BYTES=50;var C=2147483647;l.kMaxLength=C;b.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===e.foo()}catch(g){return!1}}();b.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(b.prototype,"parent",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.buffer}});Object.defineProperty(b.prototype,"offset",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.byteOffset}});"undefined"!==typeof Symbol&&null!=Symbol.species&&b[Symbol.species]===b&&Object.defineProperty(b,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1});b.poolSize=8192;b.from=function(e,a,b){return m(e,a,b)};b.prototype.__proto__=Uint8Array.prototype;
b.__proto__=Uint8Array;b.alloc=function(e,a,b){p(e);e=0>=e?n(e):void 0!==a?"string"===typeof b?n(e).fill(a,b):n(e).fill(a):n(e);return e};b.allocUnsafe=function(e){return D(e)};b.allocUnsafeSlow=function(e){return D(e)};b.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==b.prototype};b.compare=function(e,a){y(e,Uint8Array)&&(e=b.from(e,e.offset,e.byteLength));y(a,Uint8Array)&&(a=b.from(a,a.offset,a.byteLength));if(!b.isBuffer(e)||!b.isBuffer(a))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');
if(e===a)return 0;for(var g=e.length,d=a.length,f=0,c=Math.min(g,d);f<c;++f)if(e[f]!==a[f]){g=e[f];d=a[f];break}return g<d?-1:d<g?1:0};b.isEncoding=function(e){switch(String(e).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};b.concat=function(e,a){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return b.alloc(0);
var g;if(void 0===a)for(g=a=0;g<e.length;++g)a+=e[g].length;a=b.allocUnsafe(a);var d=0;for(g=0;g<e.length;++g){var f=e[g];y(f,Uint8Array)&&(f=b.from(f));if(!b.isBuffer(f))throw new TypeError('"list" argument must be an Array of Buffers');f.copy(a,d);d+=f.length}return a};b.byteLength=z;b.prototype._isBuffer=!0;b.prototype.swap16=function(){var e=this.length;if(0!==e%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var a=0;a<e;a+=2)E(this,a,a+1);return this};b.prototype.swap32=
function(){var e=this.length;if(0!==e%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var a=0;a<e;a+=4)E(this,a,a+3),E(this,a+1,a+2);return this};b.prototype.swap64=function(){var e=this.length;if(0!==e%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var a=0;a<e;a+=8)E(this,a,a+7),E(this,a+1,a+6),E(this,a+2,a+5),E(this,a+3,a+4);return this};b.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?J(this,0,e):k.apply(this,
arguments)};b.prototype.toLocaleString=b.prototype.toString;b.prototype.equals=function(e){if(!b.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===b.compare(this,e)};b.prototype.inspect=function(){var e=l.INSPECT_MAX_BYTES;var a=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim();this.length>e&&(a+=" ... ");return"<Buffer "+a+">"};b.prototype.compare=function(e,a,d,f,c){y(e,Uint8Array)&&(e=b.from(e,e.offset,e.byteLength));if(!b.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+
typeof e);void 0===a&&(a=0);void 0===d&&(d=e?e.length:0);void 0===f&&(f=0);void 0===c&&(c=this.length);if(0>a||d>e.length||0>f||c>this.length)throw new RangeError("out of range index");if(f>=c&&a>=d)return 0;if(f>=c)return-1;if(a>=d)return 1;a>>>=0;d>>>=0;f>>>=0;c>>>=0;if(this===e)return 0;var g=c-f,q=d-a,w=Math.min(g,q);f=this.slice(f,c);e=e.slice(a,d);for(a=0;a<w;++a)if(f[a]!==e[a]){g=f[a];q=e[a];break}return g<q?-1:q<g?1:0};b.prototype.includes=function(e,a,b){return-1!==this.indexOf(e,a,b)};b.prototype.indexOf=
function(e,a,b){return x(this,e,a,b,!0)};b.prototype.lastIndexOf=function(e,a,b){return x(this,e,a,b,!1)};b.prototype.write=function(a,g,b,d){if(void 0===g)d="utf8",b=this.length,g=0;else if(void 0===b&&"string"===typeof g)d=g,b=this.length,g=0;else if(isFinite(g))g>>>=0,isFinite(b)?(b>>>=0,void 0===d&&(d="utf8")):(d=b,b=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var e=this.length-g;if(void 0===b||b>e)b=e;if(0<a.length&&(0>b||0>g)||g>this.length)throw new RangeError("Attempt to write outside buffer bounds");
d||(d="utf8");for(e=!1;;)switch(d){case "hex":a:{g=Number(g)||0;d=this.length-g;b?(b=Number(b),b>d&&(b=d)):b=d;d=a.length;b>d/2&&(b=d/2);for(d=0;d<b;++d){e=parseInt(a.substr(2*d,2),16);if(e!==e){a=d;break a}this[g+d]=e}a=d}return a;case "utf8":case "utf-8":return H(q(a,this.length-g),this,g,b);case "ascii":return H(M(a),this,g,b);case "latin1":case "binary":return H(M(a),this,g,b);case "base64":return H(A.toByteArray(K(a)),this,g,b);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=a;e=this.length-
g;for(var f=[],c=0;c<d.length&&!(0>(e-=2));++c){var w=d.charCodeAt(c);a=w>>8;w%=256;f.push(w);f.push(a)}return H(f,this,g,b);default:if(e)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase();e=!0}};b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;b.prototype.slice=function(a,g){var e=this.length;a=~~a;g=void 0===g?e:~~g;0>a?(a+=e,0>a&&(a=0)):a>e&&(a=e);0>g?(g+=e,0>g&&(g=0)):g>e&&(g=e);g<a&&(g=a);a=this.subarray(a,g);a.__proto__=
b.prototype;return a};b.prototype.readUIntLE=function(a,g,b){a>>>=0;g>>>=0;b||B(a,g,this.length);b=this[a];for(var e=1,d=0;++d<g&&(e*=256);)b+=this[a+d]*e;return b};b.prototype.readUIntBE=function(a,g,b){a>>>=0;g>>>=0;b||B(a,g,this.length);b=this[a+--g];for(var e=1;0<g&&(e*=256);)b+=this[a+--g]*e;return b};b.prototype.readUInt8=function(a,g){a>>>=0;g||B(a,1,this.length);return this[a]};b.prototype.readUInt16LE=function(a,g){a>>>=0;g||B(a,2,this.length);return this[a]|this[a+1]<<8};b.prototype.readUInt16BE=
function(a,g){a>>>=0;g||B(a,2,this.length);return this[a]<<8|this[a+1]};b.prototype.readUInt32LE=function(a,g){a>>>=0;g||B(a,4,this.length);return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]};b.prototype.readUInt32BE=function(a,g){a>>>=0;g||B(a,4,this.length);return 16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])};b.prototype.readIntLE=function(a,g,b){a>>>=0;g>>>=0;b||B(a,g,this.length);b=this[a];for(var e=1,d=0;++d<g&&(e*=256);)b+=this[a+d]*e;b>=128*e&&(b-=Math.pow(2,8*g));return b};
b.prototype.readIntBE=function(a,g,b){a>>>=0;g>>>=0;b||B(a,g,this.length);b=g;for(var e=1,d=this[a+--b];0<b&&(e*=256);)d+=this[a+--b]*e;d>=128*e&&(d-=Math.pow(2,8*g));return d};b.prototype.readInt8=function(a,g){a>>>=0;g||B(a,1,this.length);return this[a]&128?-1*(255-this[a]+1):this[a]};b.prototype.readInt16LE=function(a,g){a>>>=0;g||B(a,2,this.length);a=this[a]|this[a+1]<<8;return a&32768?a|4294901760:a};b.prototype.readInt16BE=function(a,g){a>>>=0;g||B(a,2,this.length);a=this[a+1]|this[a]<<8;return a&
32768?a|4294901760:a};b.prototype.readInt32LE=function(a,g){a>>>=0;g||B(a,4,this.length);return this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24};b.prototype.readInt32BE=function(a,g){a>>>=0;g||B(a,4,this.length);return this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]};b.prototype.readFloatLE=function(a,g){a>>>=0;g||B(a,4,this.length);return L.read(this,a,!0,23,4)};b.prototype.readFloatBE=function(a,g){a>>>=0;g||B(a,4,this.length);return L.read(this,a,!1,23,4)};b.prototype.readDoubleLE=function(a,
g){a>>>=0;g||B(a,8,this.length);return L.read(this,a,!0,52,8)};b.prototype.readDoubleBE=function(a,g){a>>>=0;g||B(a,8,this.length);return L.read(this,a,!1,52,8)};b.prototype.writeUIntLE=function(a,g,b,f){a=+a;g>>>=0;b>>>=0;f||d(this,a,g,b,Math.pow(2,8*b)-1,0);f=1;var e=0;for(this[g]=a&255;++e<b&&(f*=256);)this[g+e]=a/f&255;return g+b};b.prototype.writeUIntBE=function(a,b,f,c){a=+a;b>>>=0;f>>>=0;c||d(this,a,b,f,Math.pow(2,8*f)-1,0);c=f-1;var e=1;for(this[b+c]=a&255;0<=--c&&(e*=256);)this[b+c]=a/e&
255;return b+f};b.prototype.writeUInt8=function(a,b,f){a=+a;b>>>=0;f||d(this,a,b,1,255,0);this[b]=a&255;return b+1};b.prototype.writeUInt16LE=function(a,b,f){a=+a;b>>>=0;f||d(this,a,b,2,65535,0);this[b]=a&255;this[b+1]=a>>>8;return b+2};b.prototype.writeUInt16BE=function(a,b,f){a=+a;b>>>=0;f||d(this,a,b,2,65535,0);this[b]=a>>>8;this[b+1]=a&255;return b+2};b.prototype.writeUInt32LE=function(a,b,f){a=+a;b>>>=0;f||d(this,a,b,4,4294967295,0);this[b+3]=a>>>24;this[b+2]=a>>>16;this[b+1]=a>>>8;this[b]=a&
255;return b+4};b.prototype.writeUInt32BE=function(a,b,f){a=+a;b>>>=0;f||d(this,a,b,4,4294967295,0);this[b]=a>>>24;this[b+1]=a>>>16;this[b+2]=a>>>8;this[b+3]=a&255;return b+4};b.prototype.writeIntLE=function(a,b,f,c){a=+a;b>>>=0;c||(c=Math.pow(2,8*f-1),d(this,a,b,f,c-1,-c));c=0;var e=1,g=0;for(this[b]=a&255;++c<f&&(e*=256);)0>a&&0===g&&0!==this[b+c-1]&&(g=1),this[b+c]=(a/e>>0)-g&255;return b+f};b.prototype.writeIntBE=function(a,b,f,c){a=+a;b>>>=0;c||(c=Math.pow(2,8*f-1),d(this,a,b,f,c-1,-c));c=f-
1;var e=1,g=0;for(this[b+c]=a&255;0<=--c&&(e*=256);)0>a&&0===g&&0!==this[b+c+1]&&(g=1),this[b+c]=(a/e>>0)-g&255;return b+f};b.prototype.writeInt8=function(a,b,f){a=+a;b>>>=0;f||d(this,a,b,1,127,-128);0>a&&(a=255+a+1);this[b]=a&255;return b+1};b.prototype.writeInt16LE=function(a,b,f){a=+a;b>>>=0;f||d(this,a,b,2,32767,-32768);this[b]=a&255;this[b+1]=a>>>8;return b+2};b.prototype.writeInt16BE=function(a,b,f){a=+a;b>>>=0;f||d(this,a,b,2,32767,-32768);this[b]=a>>>8;this[b+1]=a&255;return b+2};b.prototype.writeInt32LE=
function(a,b,f){a=+a;b>>>=0;f||d(this,a,b,4,2147483647,-2147483648);this[b]=a&255;this[b+1]=a>>>8;this[b+2]=a>>>16;this[b+3]=a>>>24;return b+4};b.prototype.writeInt32BE=function(a,b,f){a=+a;b>>>=0;f||d(this,a,b,4,2147483647,-2147483648);0>a&&(a=4294967295+a+1);this[b]=a>>>24;this[b+1]=a>>>16;this[b+2]=a>>>8;this[b+3]=a&255;return b+4};b.prototype.writeFloatLE=function(a,b,d){return f(this,a,b,!0,d)};b.prototype.writeFloatBE=function(a,b,d){return f(this,a,b,!1,d)};b.prototype.writeDoubleLE=function(a,
b,d){return t(this,a,b,!0,d)};b.prototype.writeDoubleBE=function(a,b,d){return t(this,a,b,!1,d)};b.prototype.copy=function(a,d,f,c){if(!b.isBuffer(a))throw new TypeError("argument should be a Buffer");f||(f=0);c||0===c||(c=this.length);d>=a.length&&(d=a.length);d||(d=0);0<c&&c<f&&(c=f);if(c===f||0===a.length||0===this.length)return 0;if(0>d)throw new RangeError("targetStart out of bounds");if(0>f||f>=this.length)throw new RangeError("Index out of range");if(0>c)throw new RangeError("sourceEnd out of bounds");
c>this.length&&(c=this.length);a.length-d<c-f&&(c=a.length-d+f);var e=c-f;if(this===a&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(d,f,c);else if(this===a&&f<d&&d<c)for(c=e-1;0<=c;--c)a[c+d]=this[c+f];else Uint8Array.prototype.set.call(a,this.subarray(f,c),d);return e};b.prototype.fill=function(a,d,f,c){if("string"===typeof a){"string"===typeof d?(c=d,d=0,f=this.length):"string"===typeof f&&(c=f,f=this.length);if(void 0!==c&&"string"!==typeof c)throw new TypeError("encoding must be a string");
if("string"===typeof c&&!b.isEncoding(c))throw new TypeError("Unknown encoding: "+c);if(1===a.length){var e=a.charCodeAt(0);if("utf8"===c&&128>e||"latin1"===c)a=e}}else"number"===typeof a&&(a&=255);if(0>d||this.length<d||this.length<f)throw new RangeError("Out of range index");if(f<=d)return this;d>>>=0;f=void 0===f?this.length:f>>>0;a||(a=0);if("number"===typeof a)for(c=d;c<f;++c)this[c]=a;else{e=b.isBuffer(a)?a:b.from(a,c);var g=e.length;if(0===g)throw new TypeError('The value "'+a+'" is invalid for argument "value"');
for(c=0;c<f-d;++c)this[c+d]=e[c%g]}return this};var Q=/[^+/0-9A-Za-z-_]/g},{"base64-js":1,ieee754:8}],6:[function(c,u,l){(function(c){l.isArray=function(b){return Array.isArray?Array.isArray(b):"[object Array]"===Object.prototype.toString.call(b)};l.isBoolean=function(b){return"boolean"===typeof b};l.isNull=function(b){return null===b};l.isNullOrUndefined=function(b){return null==b};l.isNumber=function(b){return"number"===typeof b};l.isString=function(b){return"string"===typeof b};l.isSymbol=function(b){return"symbol"===
typeof b};l.isUndefined=function(b){return void 0===b};l.isRegExp=function(b){return"[object RegExp]"===Object.prototype.toString.call(b)};l.isObject=function(b){return"object"===typeof b&&null!==b};l.isDate=function(b){return"[object Date]"===Object.prototype.toString.call(b)};l.isError=function(b){return"[object Error]"===Object.prototype.toString.call(b)||b instanceof Error};l.isFunction=function(b){return"function"===typeof b};l.isPrimitive=function(b){return null===b||"boolean"===typeof b||"number"===
typeof b||"string"===typeof b||"symbol"===typeof b||"undefined"===typeof b};l.isBuffer=c.isBuffer}).call(this,{isBuffer:c("../../is-buffer/index.js")})},{"../../is-buffer/index.js":10}],7:[function(c,u,l){function n(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=E(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0}function b(a,b,f,c){var d;if("function"!==typeof f)throw new TypeError('"listener" argument must be a function');if(d=a._events){d.newListener&&
(a.emit("newListener",b,f.listener?f.listener:f),d=a._events);var q=d[b]}else d=a._events=E(null),a._eventsCount=0;q?("function"===typeof q?q=d[b]=c?[f,q]:[q,f]:c?q.unshift(f):q.push(f),q.warned||(f=void 0===a._maxListeners?n.defaultMaxListeners:a._maxListeners)&&0<f&&q.length>f&&(q.warned=!0,f=Error("Possible EventEmitter memory leak detected. "+q.length+' "'+String(b)+'" listeners added. Use emitter.setMaxListeners() to increase limit.'),f.name="MaxListenersExceededWarning",f.emitter=a,f.type=b,
f.count=q.length,"object"===typeof console&&console.warn&&console.warn("%s: %s",f.name,f.message))):(d[b]=f,++a._eventsCount);return a}function m(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);
default:for(var a=Array(arguments.length),b=0;b<a.length;++b)a[b]=arguments[b];this.listener.apply(this.target,a)}}function p(a,b,f){a={fired:!1,wrapFn:void 0,target:a,type:b,listener:f};b=F.call(m,a);b.listener=f;return a.wrapFn=b}function D(b,c,f){b=b._events;if(!b)return[];c=b[c];if(!c)return[];if("function"===typeof c)return f?[c.listener||c]:[c];if(f)for(f=Array(c.length),b=0;b<f.length;++b)f[b]=c[b].listener||c[b];else f=a(c,c.length);return f}function v(a){var b=this._events;if(b){a=b[a];if("function"===
typeof a)return 1;if(a)return a.length}return 0}function a(a,b){for(var d=Array(b),c=0;c<b;++c)d[c]=a[c];return d}function h(a){var b=function(){};b.prototype=a;return new b}function z(a){var b=[],d;for(d in a)Object.prototype.hasOwnProperty.call(a,d)&&b.push(d);return d}function k(a){var b=this;return function(){return b.apply(a,arguments)}}var E=Object.create||h,x=Object.keys||z,F=Function.prototype.bind||k;u.exports=n;n.EventEmitter=n;n.prototype._events=void 0;n.prototype._maxListeners=void 0;
var J=10;try{c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0});var B=0===c.x}catch(d){B=!1}B?Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return J},set:function(a){if("number"!==typeof a||0>a||a!==a)throw new TypeError('"defaultMaxListeners" must be a positive number');J=a}}):n.defaultMaxListeners=J;n.prototype.setMaxListeners=function(a){if("number"!==typeof a||0>a||isNaN(a))throw new TypeError('"n" argument must be a positive number');this._maxListeners=
a;return this};n.prototype.getMaxListeners=function(){return void 0===this._maxListeners?n.defaultMaxListeners:this._maxListeners};n.prototype.emit=function(b){var d,f,c;var h="error"===b;if(c=this._events)h=h&&null==c.error;else if(!h)return!1;if(h){1<arguments.length&&(d=arguments[1]);if(d instanceof Error)throw d;c=Error('Unhandled "error" event. ('+d+")");c.context=d;throw c;}d=c[b];if(!d)return!1;c="function"===typeof d;var q=arguments.length;switch(q){case 1:if(c)d.call(this);else for(c=d.length,
d=a(d,c),h=0;h<c;++h)d[h].call(this);break;case 2:h=arguments[1];if(c)d.call(this,h);else for(c=d.length,d=a(d,c),q=0;q<c;++q)d[q].call(this,h);break;case 3:h=arguments[1];q=arguments[2];if(c)d.call(this,h,q);else for(c=d.length,d=a(d,c),f=0;f<c;++f)d[f].call(this,h,q);break;case 4:h=arguments[1];q=arguments[2];f=arguments[3];if(c)d.call(this,h,q,f);else{c=d.length;d=a(d,c);for(var m=0;m<c;++m)d[m].call(this,h,q,f)}break;default:h=Array(q-1);for(f=1;f<q;f++)h[f-1]=arguments[f];if(c)d.apply(this,h);
else for(c=d.length,d=a(d,c),q=0;q<c;++q)d[q].apply(this,h)}return!0};n.prototype.addListener=function(a,c){return b(this,a,c,!1)};n.prototype.on=n.prototype.addListener;n.prototype.prependListener=function(a,c){return b(this,a,c,!0)};n.prototype.once=function(a,b){if("function"!==typeof b)throw new TypeError('"listener" argument must be a function');this.on(a,p(this,a,b));return this};n.prototype.prependOnceListener=function(a,b){if("function"!==typeof b)throw new TypeError('"listener" argument must be a function');
this.prependListener(a,p(this,a,b));return this};n.prototype.removeListener=function(a,b){var d;if("function"!==typeof b)throw new TypeError('"listener" argument must be a function');var c=this._events;if(!c)return this;var h=c[a];if(!h)return this;if(h===b||h.listener===b)0===--this._eventsCount?this._events=E(null):(delete c[a],c.removeListener&&this.emit("removeListener",a,h.listener||b));else if("function"!==typeof h){var q=-1;for(d=h.length-1;0<=d;d--)if(h[d]===b||h[d].listener===b){var m=h[d].listener;
q=d;break}if(0>q)return this;if(0===q)h.shift();else{d=q+1;for(var n=h.length;d<n;q+=1,d+=1)h[q]=h[d];h.pop()}1===h.length&&(c[a]=h[0]);c.removeListener&&this.emit("removeListener",a,m||b)}return this};n.prototype.removeAllListeners=function(a){var b=this._events;if(!b)return this;if(!b.removeListener)return 0===arguments.length?(this._events=E(null),this._eventsCount=0):b[a]&&(0===--this._eventsCount?this._events=E(null):delete b[a]),this;if(0===arguments.length){var d=x(b);for(b=0;b<d.length;++b){var c=
d[b];"removeListener"!==c&&this.removeAllListeners(c)}this.removeAllListeners("removeListener");this._events=E(null);this._eventsCount=0;return this}d=b[a];if("function"===typeof d)this.removeListener(a,d);else if(d)for(b=d.length-1;0<=b;b--)this.removeListener(a,d[b]);return this};n.prototype.listeners=function(a){return D(this,a,!0)};n.prototype.rawListeners=function(a){return D(this,a,!1)};n.listenerCount=function(a,b){return"function"===typeof a.listenerCount?a.listenerCount(b):v.call(a,b)};n.prototype.listenerCount=
v;n.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],8:[function(c,u,l){l.read=function(c,b,m,p,l){var n=8*l-p-1;var a=(1<<n)-1,h=a>>1,z=-7;l=m?l-1:0;var k=m?-1:1,D=c[b+l];l+=k;m=D&(1<<-z)-1;D>>=-z;for(z+=n;0<z;m=256*m+c[b+l],l+=k,z-=8);n=m&(1<<-z)-1;m>>=-z;for(z+=p;0<z;n=256*n+c[b+l],l+=k,z-=8);if(0===m)m=1-h;else{if(m===a)return n?NaN:Infinity*(D?-1:1);n+=Math.pow(2,p);m-=h}return(D?-1:1)*n*Math.pow(2,m-p)};l.write=function(c,b,m,p,l,v){var a,h=8*
v-l-1,n=(1<<h)-1,k=n>>1,D=23===l?Math.pow(2,-24)-Math.pow(2,-77):0;v=p?0:v-1;var x=p?1:-1,u=0>b||0===b&&0>1/b?1:0;b=Math.abs(b);isNaN(b)||Infinity===b?(b=isNaN(b)?1:0,p=n):(p=Math.floor(Math.log(b)/Math.LN2),1>b*(a=Math.pow(2,-p))&&(p--,a*=2),b=1<=p+k?b+D/a:b+D*Math.pow(2,1-k),2<=b*a&&(p++,a/=2),p+k>=n?(b=0,p=n):1<=p+k?(b=(b*a-1)*Math.pow(2,l),p+=k):(b=b*Math.pow(2,k-1)*Math.pow(2,l),p=0));for(;8<=l;c[m+v]=b&255,v+=x,b/=256,l-=8);p=p<<l|b;for(h+=l;0<h;c[m+v]=p&255,v+=x,p/=256,h-=8);c[m+v-x]|=128*
u}},{}],9:[function(c,u,l){u.exports="function"===typeof Object.create?function(c,b){c.super_=b;c.prototype=Object.create(b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}})}:function(c,b){c.super_=b;var m=function(){};m.prototype=b.prototype;c.prototype=new m;c.prototype.constructor=c}},{}],10:[function(c,u,l){function n(b){return!!b.constructor&&"function"===typeof b.constructor.isBuffer&&b.constructor.isBuffer(b)}u.exports=function(b){return null!=b&&(n(b)||"function"===
typeof b.readFloatLE&&"function"===typeof b.slice&&n(b.slice(0,0))||!!b._isBuffer)}},{}],11:[function(c,u,l){var n={}.toString;u.exports=Array.isArray||function(b){return"[object Array]"==n.call(b)}},{}],12:[function(c,u,l){(function(c){function b(b,n,l,v){if("function"!==typeof b)throw new TypeError('"callback" argument must be a function');var a=arguments.length;switch(a){case 0:case 1:return c.nextTick(b);case 2:return c.nextTick(function(){b.call(null,n)});case 3:return c.nextTick(function(){b.call(null,
n,l)});case 4:return c.nextTick(function(){b.call(null,n,l,v)});default:var h=Array(a-1);for(a=0;a<h.length;)h[a++]=arguments[a];return c.nextTick(function(){b.apply(null,h)})}}!c.version||0===c.version.indexOf("v0.")||0===c.version.indexOf("v1.")&&0!==c.version.indexOf("v1.8.")?u.exports=b:u.exports=c.nextTick}).call(this,c("_process"))},{_process:13}],13:[function(c,u,l){function n(){throw Error("setTimeout has not been defined");}function b(){throw Error("clearTimeout has not been defined");}function m(a){if(z===
setTimeout)return setTimeout(a,0);if((z===n||!z)&&setTimeout)return z=setTimeout,setTimeout(a,0);try{return z(a,0)}catch(d){try{return z.call(null,a,0)}catch(w){return z.call(this,a,0)}}}function p(a){if(k===clearTimeout)return clearTimeout(a);if((k===b||!k)&&clearTimeout)return k=clearTimeout,clearTimeout(a);try{return k(a)}catch(d){try{return k.call(null,a)}catch(w){return k.call(this,a)}}}function D(){x&&F&&(x=!1,F.length?E=F.concat(E):J=-1,E.length&&v())}function v(){if(!x){var a=m(D);x=!0;for(var b=
E.length;b;){F=E;for(E=[];++J<b;)F&&F[J].run();J=-1;b=E.length}F=null;x=!1;p(a)}}function a(a,b){this.fun=a;this.array=b}function h(){}c=u.exports={};try{var z="function"===typeof setTimeout?setTimeout:n}catch(B){z=n}try{var k="function"===typeof clearTimeout?clearTimeout:b}catch(B){k=b}var E=[],x=!1,F,J=-1;c.nextTick=function(b){var d=Array(arguments.length-1);if(1<arguments.length)for(var c=1;c<arguments.length;c++)d[c-1]=arguments[c];E.push(new a(b,d));1!==E.length||x||m(v)};a.prototype.run=function(){this.fun.apply(null,
this.array)};c.title="browser";c.browser=!0;c.env={};c.argv=[];c.version="";c.versions={};c.on=h;c.addListener=h;c.once=h;c.off=h;c.removeListener=h;c.removeAllListeners=h;c.emit=h;c.prependListener=h;c.prependOnceListener=h;c.listeners=function(a){return[]};c.binding=function(a){throw Error("process.binding is not supported");};c.cwd=function(){return"/"};c.chdir=function(a){throw Error("process.chdir is not supported");};c.umask=function(){return 0}},{}],14:[function(c,u,l){u.exports=c("./lib/_stream_duplex.js")},
{"./lib/_stream_duplex.js":15}],15:[function(c,u,l){function n(a){if(!(this instanceof n))return new n(a);D.call(this,a);v.call(this,a);a&&!1===a.readable&&(this.readable=!1);a&&!1===a.writable&&(this.writable=!1);this.allowHalfOpen=!0;a&&!1===a.allowHalfOpen&&(this.allowHalfOpen=!1);this.once("end",b)}function b(){this.allowHalfOpen||this._writableState.ended||p(m,this)}function m(a){a.end()}l=Object.keys||function(a){var b=[],c;for(c in a)b.push(c);return b};u.exports=n;var p=c("process-nextick-args");
u=c("core-util-is");u.inherits=c("inherits");var D=c("./_stream_readable"),v=c("./_stream_writable");u.inherits(n,D);c=l(v.prototype);for(u=0;u<c.length;u++)l=c[u],n.prototype[l]||(n.prototype[l]=v.prototype[l])},{"./_stream_readable":17,"./_stream_writable":19,"core-util-is":6,inherits:9,"process-nextick-args":12}],16:[function(c,u,l){function n(c){if(!(this instanceof n))return new n(c);b.call(this,c)}u.exports=n;var b=c("./_stream_transform");u=c("core-util-is");u.inherits=c("inherits");u.inherits(n,
b);n.prototype._transform=function(b,c,n){n(null,b)}},{"./_stream_transform":18,"core-util-is":6,inherits:9}],17:[function(c,u,l){(function(n){function b(a,b,d){if("function"===typeof a.prependListener)return a.prependListener(b,d);if(a._events&&a._events[b])K(a._events[b])?a._events[b].unshift(d):a._events[b]=[d,a._events[b]];else a.on(b,d)}function m(a,b){q=q||c("./_stream_duplex");a=a||{};this.objectMode=!!a.objectMode;b instanceof q&&(this.objectMode=this.objectMode||!!a.readableObjectMode);b=
a.highWaterMark;var d=this.objectMode?16:16384;this.highWaterMark=b||0===b?b:d;this.highWaterMark=~~this.highWaterMark;this.buffer=new O;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.defaultEncoding=a.defaultEncoding||"utf8";this.ranOut=!1;this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;a.encoding&&(Q||(Q=c("string_decoder/").StringDecoder),
this.decoder=new Q(a.encoding),this.encoding=a.encoding)}function p(a){q=q||c("./_stream_duplex");if(!(this instanceof p))return new p(a);this._readableState=new m(a,this);this.readable=!0;a&&"function"===typeof a.read&&(this._read=a.read);M.call(this)}function l(b,d,c,f,h){var e=c;var g=null;H.isBuffer(e)||"string"===typeof e||null===e||void 0===e||d.objectMode||(g=new TypeError("Invalid non-string/buffer chunk"));if(e=g)b.emit("error",e);else if(null===c)d.reading=!1,d.ended||(d.decoder&&(c=d.decoder.end())&&
c.length&&(d.buffer.push(c),d.length+=d.objectMode?1:c.length),d.ended=!0,a(b));else if(d.objectMode||c&&0<c.length)if(d.ended&&!h)b.emit("error",Error("stream.push() after EOF"));else if(d.endEmitted&&h)b.emit("error",Error("stream.unshift() after end event"));else{if(d.decoder&&!h&&!f){c=d.decoder.write(c);var q=!d.objectMode&&0===c.length}h||(d.reading=!1);q||(d.flowing&&0===d.length&&!d.sync?(b.emit("data",c),b.read(0)):(d.length+=d.objectMode?1:c.length,h?d.buffer.unshift(c):d.buffer.push(c),
d.needReadable&&a(b)));d.readingMore||(d.readingMore=!0,t(z,b,d))}else h||(d.reading=!1);return!d.ended&&(d.needReadable||d.length<d.highWaterMark||0===d.length)}function v(a,b){if(0>=a||0===b.length&&b.ended)return 0;if(b.objectMode)return 1;if(a!==a)return b.flowing&&b.length?b.buffer.head.data.length:b.length;if(a>b.highWaterMark){var d=a;8388608<=d?d=8388608:(d--,d|=d>>>1,d|=d>>>2,d|=d>>>4,d|=d>>>8,d|=d>>>16,d++);b.highWaterMark=d}return a<=b.length?a:b.ended?b.length:(b.needReadable=!0,0)}function a(a){var b=
a._readableState;b.needReadable=!1;b.emittedReadable||(C("emitReadable",b.flowing),b.emittedReadable=!0,b.sync?t(h,a):h(a))}function h(a){C("emit readable");a.emit("readable");F(a)}function z(a,b){for(var d=b.length;!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark&&(C("maybeReadMore read 0"),a.read(0),d!==b.length);)d=b.length;b.readingMore=!1}function k(a){return function(){var b=a._readableState;C("pipeOnDrain",b.awaitDrain);b.awaitDrain&&b.awaitDrain--;0===b.awaitDrain&&a.listeners("data").length&&
(b.flowing=!0,F(a))}}function E(a){C("readable nexttick read 0");a.read(0)}function x(a,b){b.reading||(C("resume read 0"),a.read(0));b.resumeScheduled=!1;b.awaitDrain=0;a.emit("resume");F(a);b.flowing&&!b.reading&&a.read(0)}function F(a){var b=a._readableState;for(C("flow",b.flowing);b.flowing&&null!==a.read(););}function J(a,b){if(0===b.length)return null;if(b.objectMode)var d=b.buffer.shift();else if(!a||a>=b.length)d=b.decoder?b.buffer.join(""):1===b.buffer.length?b.buffer.head.data:b.buffer.concat(b.length),
b.buffer.clear();else{d=b.buffer;b=b.decoder;if(a<d.head.data.length)b=d.head.data.slice(0,a),d.head.data=d.head.data.slice(a);else{if(a===d.head.data.length)d=d.shift();else if(b){b=d.head;var c=1,f=b.data;for(a-=f.length;b=b.next;){var e=b.data,g=a>e.length?e.length:a;f=g===e.length?f+e:f+e.slice(0,a);a-=g;if(0===a){g===e.length?(++c,d.head=b.next?b.next:d.tail=null):(d.head=b,b.data=e.slice(g));break}++c}d.length-=c;d=f}else{b=y.allocUnsafe(a);c=d.head;f=1;c.data.copy(b);for(a-=c.data.length;c=
c.next;){e=c.data;g=a>e.length?e.length:a;e.copy(b,b.length-a,0,g);a-=g;if(0===a){g===e.length?(++f,d.head=c.next?c.next:d.tail=null):(d.head=c,c.data=e.slice(g));break}++f}d.length-=f;d=b}b=d}d=b}return d}function B(a){var b=a._readableState;if(0<b.length)throw Error('"endReadable()" called on non-empty stream');b.endEmitted||(b.ended=!0,t(d,b,a))}function d(a,b){a.endEmitted||0!==a.length||(a.endEmitted=!0,b.readable=!1,b.emit("end"))}function w(a,b){for(var d=0,c=a.length;d<c;d++)b(a[d],d)}function f(a,
b){for(var d=0,c=a.length;d<c;d++)if(a[d]===b)return d;return-1}u.exports=p;var t=c("process-nextick-args"),K=c("isarray"),q;p.ReadableState=m;c("events");try{var M=c("stream")}catch(e){}finally{M||(M=c("events").EventEmitter)}var H=c("buffer").Buffer,y=c("buffer-shims"),A=c("core-util-is");A.inherits=c("inherits");var L=c("util"),C=void 0;C=L&&L.debuglog?L.debuglog("stream"):function(){};var O=c("./internal/streams/BufferList"),Q;A.inherits(p,M);p.prototype.push=function(a,b){var d=this._readableState;
d.objectMode||"string"!==typeof a||(b=b||d.defaultEncoding,b!==d.encoding&&(a=y.from(a,b),b=""));return l(this,d,a,b,!1)};p.prototype.unshift=function(a){return l(this,this._readableState,a,"",!0)};p.prototype.isPaused=function(){return!1===this._readableState.flowing};p.prototype.setEncoding=function(a){Q||(Q=c("string_decoder/").StringDecoder);this._readableState.decoder=new Q(a);this._readableState.encoding=a;return this};p.prototype.read=function(b){C("read",b);b=parseInt(b,10);var d=this._readableState,
c=b;0!==b&&(d.emittedReadable=!1);if(0===b&&d.needReadable&&(d.length>=d.highWaterMark||d.ended))return C("read: emitReadable",d.length,d.ended),0===d.length&&d.ended?B(this):a(this),null;b=v(b,d);if(0===b&&d.ended)return 0===d.length&&B(this),null;var f=d.needReadable;C("need readable",f);if(0===d.length||d.length-b<d.highWaterMark)f=!0,C("length less than watermark",f);d.ended||d.reading?C("reading or ended",!1):f&&(C("do read"),d.reading=!0,d.sync=!0,0===d.length&&(d.needReadable=!0),this._read(d.highWaterMark),
d.sync=!1,d.reading||(b=v(c,d)));f=0<b?J(b,d):null;null===f?(d.needReadable=!0,b=0):d.length-=b;0===d.length&&(d.ended||(d.needReadable=!0),c!==b&&d.ended&&B(this));null!==f&&this.emit("data",f);return f};p.prototype._read=function(a){this.emit("error",Error("_read() is not implemented"))};p.prototype.pipe=function(a,d){function c(a){C("onunpipe");a===w&&h()}function e(){C("onend");a.end()}function h(){C("cleanup");a.removeListener("close",m);a.removeListener("finish",l);a.removeListener("drain",
z);a.removeListener("error",g);a.removeListener("unpipe",c);w.removeListener("end",e);w.removeListener("end",h);w.removeListener("data",q);Y=!0;!G.awaitDrain||a._writableState&&!a._writableState.needDrain||z()}function q(b){C("ondata");W=!1;!1!==a.write(b)||W||((1===G.pipesCount&&G.pipes===a||1<G.pipesCount&&-1!==f(G.pipes,a))&&!Y&&(C("false write response, pause",w._readableState.awaitDrain),w._readableState.awaitDrain++,W=!0),w.pause())}function g(b){C("onerror",b);N();a.removeListener("error",
g);0===a.listeners("error").length&&a.emit("error",b)}function m(){a.removeListener("finish",l);N()}function l(){C("onfinish");a.removeListener("close",m);N()}function N(){C("unpipe");w.unpipe(a)}var w=this,G=this._readableState;switch(G.pipesCount){case 0:G.pipes=a;break;case 1:G.pipes=[G.pipes,a];break;default:G.pipes.push(a)}G.pipesCount+=1;C("pipe count=%d opts=%j",G.pipesCount,d);d=d&&!1===d.end||a===n.stdout||a===n.stderr?h:e;if(G.endEmitted)t(d);else w.once("end",d);a.on("unpipe",c);var z=
k(w);a.on("drain",z);var Y=!1,W=!1;w.on("data",q);b(a,"error",g);a.once("close",m);a.once("finish",l);a.emit("pipe",w);G.flowing||(C("pipe resume"),w.resume());return a};p.prototype.unpipe=function(a){var b=this._readableState;if(0===b.pipesCount)return this;if(1===b.pipesCount){if(a&&a!==b.pipes)return this;a||(a=b.pipes);b.pipes=null;b.pipesCount=0;b.flowing=!1;a&&a.emit("unpipe",this);return this}if(!a){a=b.pipes;var d=b.pipesCount;b.pipes=null;b.pipesCount=0;b.flowing=!1;for(b=0;b<d;b++)a[b].emit("unpipe",
this);return this}d=f(b.pipes,a);if(-1===d)return this;b.pipes.splice(d,1);--b.pipesCount;1===b.pipesCount&&(b.pipes=b.pipes[0]);a.emit("unpipe",this);return this};p.prototype.on=function(b,d){d=M.prototype.on.call(this,b,d);"data"===b?!1!==this._readableState.flowing&&this.resume():"readable"===b&&(b=this._readableState,b.endEmitted||b.readableListening||(b.readableListening=b.needReadable=!0,b.emittedReadable=!1,b.reading?b.length&&a(this,b):t(E,this)));return d};p.prototype.addListener=p.prototype.on;
p.prototype.resume=function(){var a=this._readableState;a.flowing||(C("resume"),a.flowing=!0,a.resumeScheduled||(a.resumeScheduled=!0,t(x,this,a)));return this};p.prototype.pause=function(){C("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(C("pause"),this._readableState.flowing=!1,this.emit("pause"));return this};p.prototype.wrap=function(a){var b=this._readableState,d=!1,c=this;a.on("end",function(){C("wrapped end");if(b.decoder&&!b.ended){var a=b.decoder.end();
a&&a.length&&c.push(a)}c.push(null)});a.on("data",function(f){C("wrapped data");b.decoder&&(f=b.decoder.write(f));b.objectMode&&(null===f||void 0===f)||!(b.objectMode||f&&f.length)||c.push(f)||(d=!0,a.pause())});for(var f in a)void 0===this[f]&&"function"===typeof a[f]&&(this[f]=function(b){return function(){return a[b].apply(a,arguments)}}(f));w(["error","close","destroy","pause","resume"],function(b){a.on(b,c.emit.bind(c,b))});c._read=function(b){C("wrapped _read",b);d&&(d=!1,a.resume())};return c};
p._fromList=J}).call(this,c("_process"))},{"./_stream_duplex":15,"./internal/streams/BufferList":20,_process:13,buffer:5,"buffer-shims":4,"core-util-is":6,events:7,inherits:9,isarray:11,"process-nextick-args":12,"string_decoder/":28,util:2}],18:[function(c,u,l){function n(b){this.afterTransform=function(c,a){var h=b._transformState;h.transforming=!1;var m=h.writecb;m?(h.writechunk=null,h.writecb=null,null!==a&&void 0!==a&&b.push(a),m(c),c=b._readableState,c.reading=!1,(c.needReadable||c.length<c.highWaterMark)&&
b._read(c.highWaterMark),c=void 0):c=b.emit("error",Error("no writecb in Transform class"));return c};this.transforming=this.needTransform=!1;this.writeencoding=this.writechunk=this.writecb=null}function b(c){if(!(this instanceof b))return new b(c);p.call(this,c);this._transformState=new n(this);var l=this;this._readableState.needReadable=!0;this._readableState.sync=!1;c&&("function"===typeof c.transform&&(this._transform=c.transform),"function"===typeof c.flush&&(this._flush=c.flush));this.once("prefinish",
function(){"function"===typeof this._flush?this._flush(function(a,b){m(l,a,b)}):m(l)})}function m(b,c,a){if(c)return b.emit("error",c);null!==a&&void 0!==a&&b.push(a);c=b._transformState;if(b._writableState.length)throw Error("Calling transform done when ws.length != 0");if(c.transforming)throw Error("Calling transform done when still transforming");return b.push(null)}u.exports=b;var p=c("./_stream_duplex");u=c("core-util-is");u.inherits=c("inherits");u.inherits(b,p);b.prototype.push=function(b,
c){this._transformState.needTransform=!1;return p.prototype.push.call(this,b,c)};b.prototype._transform=function(b,c,a){throw Error("_transform() is not implemented");};b.prototype._write=function(b,c,a){var h=this._transformState;h.writecb=a;h.writechunk=b;h.writeencoding=c;h.transforming||(b=this._readableState,(h.needTransform||b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark))};b.prototype._read=function(b){b=this._transformState;null!==b.writechunk&&b.writecb&&!b.transforming?
(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform)):b.needTransform=!0}},{"./_stream_duplex":15,"core-util-is":6,inherits:9}],19:[function(c,u,l){(function(n,b){function m(){}function l(a,b,d){this.chunk=a;this.encoding=b;this.callback=d;this.next=null}function D(a,b){B=B||c("./_stream_duplex");a=a||{};this.objectMode=!!a.objectMode;b instanceof B&&(this.objectMode=this.objectMode||!!a.writableObjectMode);var d=a.highWaterMark,f=this.objectMode?16:16384;this.highWaterMark=
d||0===d?d:f;this.highWaterMark=~~this.highWaterMark;this.finished=this.ended=this.ending=this.needDrain=!1;this.decodeStrings=!1!==a.decodeStrings;this.defaultEncoding=a.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(a){var d=b._writableState,c=d.sync,f=d.writecb;d.writing=!1;d.writecb=null;d.length-=d.writelen;d.writelen=0;a?(--d.pendingcb,c?F(f,a):f(a),b._writableState.errorEmitted=!0,b.emit("error",a)):((a=k(d))||
d.corked||d.bufferProcessing||!d.bufferedRequest||z(b,d),c?J(h,b,d,a,f):h(b,d,a,f))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.bufferedRequestCount=0;this.corkedRequestsFree=new x(this)}function v(a){B=B||c("./_stream_duplex");if(!(K.call(v,this)||this instanceof B))return new v(a);this._writableState=new D(a,this);this.writable=!0;a&&("function"===typeof a.write&&(this._write=a.write),"function"===
typeof a.writev&&(this._writev=a.writev));w.call(this)}function a(a,b,d,c,f,h,m){b.writelen=c;b.writecb=m;b.writing=!0;b.sync=!0;d?a._writev(f,b.onwrite):a._write(f,h,b.onwrite);b.sync=!1}function h(a,b,d,c){!d&&0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"));b.pendingcb--;c();E(a,b)}function z(b,d){d.bufferProcessing=!0;var c=d.bufferedRequest;if(b._writev&&c&&c.next){var f=Array(d.bufferedRequestCount),h=d.corkedRequestsFree;h.entry=c;for(var q=0;c;)f[q]=c,c=c.next,q+=1;a(b,d,!0,d.length,
f,"",h.finish);d.pendingcb++;d.lastBufferedRequest=null;h.next?(d.corkedRequestsFree=h.next,h.next=null):d.corkedRequestsFree=new x(d)}else{for(;c&&(f=c.chunk,a(b,d,!1,d.objectMode?1:f.length,f,c.encoding,c.callback),c=c.next,!d.writing););null===c&&(d.lastBufferedRequest=null)}d.bufferedRequestCount=0;d.bufferedRequest=c;d.bufferProcessing=!1}function k(a){return a.ending&&0===a.length&&null===a.bufferedRequest&&!a.finished&&!a.writing}function E(a,b){var d=k(b);d&&(0===b.pendingcb?(b.prefinished||
(b.prefinished=!0,a.emit("prefinish")),b.finished=!0,a.emit("finish")):b.prefinished||(b.prefinished=!0,a.emit("prefinish")));return d}function x(a){var b=this;this.entry=this.next=null;this.finish=function(d){var c=b.entry;for(b.entry=null;c;){var f=c.callback;a.pendingcb--;f(d);c=c.next}a.corkedRequestsFree?a.corkedRequestsFree.next=b:a.corkedRequestsFree=b}}u.exports=v;var F=c("process-nextick-args"),J=!n.browser&&-1<["v0.10","v0.9."].indexOf(n.version.slice(0,5))?b:F,B;v.WritableState=D;n=c("core-util-is");
n.inherits=c("inherits");var d={deprecate:c("util-deprecate")};try{var w=c("stream")}catch(q){}finally{w||(w=c("events").EventEmitter)}var f=c("buffer").Buffer,t=c("buffer-shims");n.inherits(v,w);D.prototype.getBuffer=function(){for(var a=this.bufferedRequest,b=[];a;)b.push(a),a=a.next;return b};(function(){try{Object.defineProperty(D.prototype,"buffer",{get:d.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(q){}})();
if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var K=Function.prototype[Symbol.hasInstance];Object.defineProperty(v,Symbol.hasInstance,{value:function(a){return K.call(this,a)?!0:a&&a._writableState instanceof D}})}else K=function(a){return a instanceof this};v.prototype.pipe=function(){this.emit("error",Error("Cannot pipe, not readable"))};v.prototype.write=function(b,d,c){var h=this._writableState,q=!1;"function"===typeof d&&(c=d,d=
null);f.isBuffer(b)?d="buffer":d||(d=h.defaultEncoding);"function"!==typeof c&&(c=m);if(h.ended)h=c,b=Error("write after end"),this.emit("error",b),F(h,b);else{var n=c,k=!0,w=!1;null===b?w=new TypeError("May not write null values to stream"):f.isBuffer(b)||"string"===typeof b||void 0===b||h.objectMode||(w=new TypeError("Invalid non-string/buffer chunk"));w&&(this.emit("error",w),F(n,w),k=!1);k&&(h.pendingcb++,q=d,h.objectMode||!1===h.decodeStrings||"string"!==typeof b||(b=t.from(b,q)),f.isBuffer(b)&&
(q="buffer"),n=h.objectMode?1:b.length,h.length+=n,d=h.length<h.highWaterMark,d||(h.needDrain=!0),h.writing||h.corked?(n=h.lastBufferedRequest,h.lastBufferedRequest=new l(b,q,c),n?n.next=h.lastBufferedRequest:h.bufferedRequest=h.lastBufferedRequest,h.bufferedRequestCount+=1):a(this,h,!1,n,b,q,c),q=d)}return q};v.prototype.cork=function(){this._writableState.corked++};v.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.finished||a.bufferProcessing||
!a.bufferedRequest||z(this,a))};v.prototype.setDefaultEncoding=function(a){"string"===typeof a&&(a=a.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((a+"").toLowerCase())))throw new TypeError("Unknown encoding: "+a);this._writableState.defaultEncoding=a;return this};v.prototype._write=function(a,b,d){d(Error("_write() is not implemented"))};v.prototype._writev=null;v.prototype.end=function(a,b,d){var c=this._writableState;"function"===
typeof a?(d=a,b=a=null):"function"===typeof b&&(d=b,b=null);null!==a&&void 0!==a&&this.write(a,b);c.corked&&(c.corked=1,this.uncork());if(!c.ending&&!c.finished){a=d;c.ending=!0;E(this,c);if(a)if(c.finished)F(a);else this.once("finish",a);c.ended=!0;this.writable=!1}}}).call(this,c("_process"),c("timers").setImmediate)},{"./_stream_duplex":15,_process:13,buffer:5,"buffer-shims":4,"core-util-is":6,events:7,inherits:9,"process-nextick-args":12,timers:29,"util-deprecate":30}],20:[function(c,u,l){function n(){this.tail=
this.head=null;this.length=0}c("buffer");var b=c("buffer-shims");u.exports=n;n.prototype.push=function(b){b={data:b,next:null};0<this.length?this.tail.next=b:this.head=b;this.tail=b;++this.length};n.prototype.unshift=function(b){b={data:b,next:this.head};0===this.length&&(this.tail=b);this.head=b;++this.length};n.prototype.shift=function(){if(0!==this.length){var b=this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return b}};n.prototype.clear=function(){this.head=
this.tail=null;this.length=0};n.prototype.join=function(b){if(0===this.length)return"";for(var c=this.head,m=""+c.data;c=c.next;)m+=b+c.data;return m};n.prototype.concat=function(c){if(0===this.length)return b.alloc(0);if(1===this.length)return this.head.data;c=b.allocUnsafe(c>>>0);for(var m=this.head,n=0;m;)m.data.copy(c,n),n+=m.data.length,m=m.next;return c}},{buffer:5,"buffer-shims":4}],21:[function(c,u,l){u.exports=c("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":16}],22:[function(c,
u,l){var n=c("_process");a:{try{var b=c("stream");break a}catch(m){}b=void 0}l=u.exports=c("./lib/_stream_readable.js");l.Stream=b||l;l.Readable=l;l.Writable=c("./lib/_stream_writable.js");l.Duplex=c("./lib/_stream_duplex.js");l.Transform=c("./lib/_stream_transform.js");l.PassThrough=c("./lib/_stream_passthrough.js");!n.browser&&"disable"===n.env.READABLE_STREAM&&b&&(u.exports=b)},{"./lib/_stream_duplex.js":15,"./lib/_stream_passthrough.js":16,"./lib/_stream_readable.js":17,"./lib/_stream_transform.js":18,
"./lib/_stream_writable.js":19,_process:13}],23:[function(c,u,l){u.exports=c("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":18}],24:[function(c,u,l){u.exports=c("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":19}],25:[function(c,u,l){function n(b,c){for(var a in b)c[a]=b[a]}function b(b,c,a){return p(b,c,a)}var m=c("buffer"),p=m.Buffer;p.from&&p.alloc&&p.allocUnsafe&&p.allocUnsafeSlow?u.exports=m:(n(m,l),l.Buffer=b);n(p,b);b.from=function(b,c,a){if("number"===typeof b)throw new TypeError("Argument must not be a number");
return p(b,c,a)};b.alloc=function(b,c,a){if("number"!==typeof b)throw new TypeError("Argument must be a number");b=p(b);void 0!==c?"string"===typeof a?b.fill(c,a):b.fill(c):b.fill(0);return b};b.allocUnsafe=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return p(b)};b.allocUnsafeSlow=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return m.SlowBuffer(b)}},{buffer:5}],26:[function(c,u,l){(function(n){(function(b){function m(a,
d){if(!(this instanceof m))return new m(a,d);for(var c=0,f=K.length;c<f;c++)this[K[c]]="";this.q=this.c="";this.bufferCheckPosition=b.MAX_BUFFER_LENGTH;this.opt=d||{};this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags;this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase";this.tags=[];this.closed=this.closedRoot=this.sawRoot=!1;this.tag=this.error=null;this.strict=!!a;this.noscript=!(!a&&!this.opt.noscript);this.state=r.BEGIN;this.ENTITIES=(this.strictEntities=this.opt.strictEntities)?
Object.create(b.XML_ENTITIES):Object.create(b.ENTITIES);this.attribList=[];this.opt.xmlns&&(this.ns=Object.create(I));if(this.trackPosition=!1!==this.opt.position)this.position=this.line=this.column=0;this.onready&&this.onready(void 0)}function l(a,b){if(!(this instanceof l))return new l(a,b);q.apply(this);this._parser=new m(a,b);this.readable=this.writable=!0;var d=this;this._parser.onend=function(){d.emit("end")};this._parser.onerror=function(a){d.emit("error",a);d._parser.error=null};this._decoder=
null;M.forEach(function(a){Object.defineProperty(d,"on"+a,{get:function(){return d._parser["on"+a]},set:function(b){if(!b)return d.removeAllListeners(a),d._parser["on"+a]=b;d.on(a,b)},enumerable:!0,configurable:!1})})}function u(a){return a.split("").reduce(function(a,b){a[b]=!0;return a},{})}function v(a,b){return"[object RegExp]"===Object.prototype.toString.call(a)?!!b.match(a):a[b]}function a(a,b,d){a.textNode&&h(a);a[b]&&a[b](d)}function h(a){a.textNode=z(a.opt,a.textNode);a.textNode&&a.ontext&&
a.ontext(a.textNode);a.textNode=""}function z(a,b){a.trim&&(b=b.trim());a.normalize&&(b=b.replace(/\s+/g," "));return b}function k(a,b){h(a);a.trackPosition&&(b+="\nLine: "+a.line+"\nColumn: "+a.column+"\nChar: "+a.c);b=Error(b);a.error=b;a.onerror&&a.onerror(b);return a}function E(a){a.sawRoot&&!a.closedRoot&&x(a,"Unclosed root tag");a.state!==r.BEGIN&&a.state!==r.BEGIN_WHITESPACE&&a.state!==r.TEXT&&k(a,"Unexpected end");h(a);a.c="";a.closed=!0;a.onend&&a.onend(void 0);m.call(a,a.strict,a.opt);return a}
function x(a,b){if("object"!==typeof a||!(a instanceof m))throw Error("bad call to strictFail");a.strict&&k(a,b)}function F(a,b){var d=0>a.indexOf(":")?["",a]:a.split(":"),c=d[0];d=d[1];b&&"xmlns"===a&&(c="xmlns",d="");return{prefix:c,local:d}}function J(b){b.strict||(b.attribName=b.attribName[b.looseCase]());if(-1===b.attribList.indexOf(b.attribName)&&!b.tag.attributes.hasOwnProperty(b.attribName))if(b.opt.xmlns){var d=F(b.attribName,!0),c=d.local;if("xmlns"===d.prefix)if("xml"===c&&b.attribValue!==
e)x(b,"xml: prefix must be bound to "+e+"\nActual: "+b.attribValue);else if("xmlns"===c&&b.attribValue!==g)x(b,"xmlns: prefix must be bound to "+g+"\nActual: "+b.attribValue);else{d=b.tag;var f=b.tags[b.tags.length-1]||b;d.ns===f.ns&&(d.ns=Object.create(f.ns));d.ns[c]=b.attribValue}b.attribList.push([b.attribName,b.attribValue])}else b.tag.attributes[b.attribName]=b.attribValue,a(b,"onattribute",{name:b.attribName,value:b.attribValue});b.attribName=b.attribValue=""}function B(b,d){if(b.opt.xmlns){var c=
b.tag,f=F(b.tagName);c.prefix=f.prefix;c.local=f.local;c.uri=c.ns[f.prefix]||"";c.prefix&&!c.uri&&(x(b,"Unbound namespace prefix: "+JSON.stringify(b.tagName)),c.uri=f.prefix);f=b.tags[b.tags.length-1]||b;c.ns&&f.ns!==c.ns&&Object.keys(c.ns).forEach(function(d){a(b,"onopennamespace",{prefix:d,uri:c.ns[d]})});f=0;for(var h=b.attribList.length;f<h;f++){var e=b.attribList[f],g=e[0],m=e[1],n=F(g,!0);e=n.prefix;var k=""===e?"":c.ns[e]||"";m={name:g,value:m,prefix:e,local:n.local,uri:k};e&&"xmlns"!==e&&
!k&&(x(b,"Unbound namespace prefix: "+JSON.stringify(e)),m.uri=e);b.tag.attributes[g]=m;a(b,"onattribute",m)}b.attribList.length=0}b.tag.isSelfClosing=!!d;b.sawRoot=!0;b.tags.push(b.tag);a(b,"onopentag",b.tag);d||(b.noscript||"script"!==b.tagName.toLowerCase()?b.state=r.TEXT:b.state=r.SCRIPT,b.tag=null,b.tagName="");b.attribName=b.attribValue="";b.attribList.length=0}function d(b){if(b.tagName){if(b.script){if("script"!==b.tagName){b.script+="</"+b.tagName+">";b.tagName="";b.state=r.SCRIPT;return}a(b,
"onscript",b.script);b.script=""}var d=b.tags.length,c=b.tagName;b.strict||(c=c[b.looseCase]());for(var f=c;d--;)if(b.tags[d].name!==f)x(b,"Unexpected close tag");else break;if(0>d)x(b,"Unmatched closing tag: "+b.tagName),b.textNode+="</"+b.tagName+">";else{b.tagName=c;for(c=b.tags.length;c-- >d;){var h=b.tag=b.tags.pop();b.tagName=b.tag.name;a(b,"onclosetag",b.tagName);for(var e in h.ns);f=b.tags[b.tags.length-1]||b;b.opt.xmlns&&h.ns!==f.ns&&Object.keys(h.ns).forEach(function(d){a(b,"onclosenamespace",
{prefix:d,uri:h.ns[d]})})}0===d&&(b.closedRoot=!0);b.tagName=b.attribValue=b.attribName="";b.attribList.length=0}}else x(b,"Weird empty close tag."),b.textNode+="</>";b.state=r.TEXT}function w(a){var b=a.entity,d=b.toLowerCase(),c="";if(a.ENTITIES[b])return a.ENTITIES[b];if(a.ENTITIES[d])return a.ENTITIES[d];b=d;if("#"===b.charAt(0))if("x"===b.charAt(1)){b=b.slice(2);var f=parseInt(b,16);c=f.toString(16)}else b=b.slice(1),f=parseInt(b,10),c=f.toString(10);b=b.replace(/^0+/,"");return c.toLowerCase()!==
b?(x(a,"Invalid character entity"),"&"+a.entity+";"):String.fromCodePoint(f)}function f(a,b){"<"===b?(a.state=r.OPEN_WAKA,a.startTagPosition=a.position):v(H,b)||(x(a,"Non-whitespace before first tag."),a.textNode=b,a.state=r.TEXT)}function t(a,b){var d="";b<a.length&&(d=a.charAt(b));return d}b.parser=function(a,b){return new m(a,b)};b.SAXParser=m;b.SAXStream=l;b.createStream=function(a,b){return new l(a,b)};b.MAX_BUFFER_LENGTH=65536;var K="comment sgmlDecl textNode tagName doctype procInstName procInstBody entity attribName attribValue cdata script".split(" ");
b.EVENTS="text processinginstruction sgmldeclaration doctype comment opentagstart attribute opentag closetag opencdata cdata closecdata error end ready script opennamespace closenamespace".split(" ");Object.create||(Object.create=function(a){function b(){}b.prototype=a;return new b});Object.keys||(Object.keys=function(a){var b=[],d;for(d in a)a.hasOwnProperty(d)&&b.push(d);return b});m.prototype={end:function(){E(this)},write:function(c){if(this.error)throw this.error;if(this.closed)return k(this,
"Cannot write after close. Assign an onready handler.");if(null===c)return E(this);"object"===typeof c&&(c=c.toString());for(var e=0,g;;){this.c=g=t(c,e++);if(!g)break;this.trackPosition&&(this.position++,"\n"===g?(this.line++,this.column=0):this.column++);switch(this.state){case r.BEGIN:this.state=r.BEGIN_WHITESPACE;if("\ufeff"===g)continue;f(this,g);continue;case r.BEGIN_WHITESPACE:f(this,g);continue;case r.TEXT:if(this.sawRoot&&!this.closedRoot){for(var m=e-1;g&&"<"!==g&&"&"!==g;)(g=t(c,e++))&&
this.trackPosition&&(this.position++,"\n"===g?(this.line++,this.column=0):this.column++);this.textNode+=c.substring(m,e-1)}"<"!==g||this.sawRoot&&this.closedRoot&&!this.strict?(v(H,g)||this.sawRoot&&!this.closedRoot||x(this,"Text data outside of root node."),"&"===g?this.state=r.TEXT_ENTITY:this.textNode+=g):(this.state=r.OPEN_WAKA,this.startTagPosition=this.position);continue;case r.SCRIPT:"<"===g?this.state=r.SCRIPT_ENDING:this.script+=g;continue;case r.SCRIPT_ENDING:"/"===g?this.state=r.CLOSE_TAG:
(this.script+="<"+g,this.state=r.SCRIPT);continue;case r.OPEN_WAKA:"!"===g?(this.state=r.SGML_DECL,this.sgmlDecl=""):v(H,g)||(v(P,g)?(this.state=r.OPEN_TAG,this.tagName=g):"/"===g?(this.state=r.CLOSE_TAG,this.tagName=""):"?"===g?(this.state=r.PROC_INST,this.procInstName=this.procInstBody=""):(x(this,"Unencoded <"),this.startTagPosition+1<this.position&&(g=Array(this.position-this.startTagPosition).join(" ")+g),this.textNode+="<"+g,this.state=r.TEXT));continue;case r.SGML_DECL:(this.sgmlDecl+g).toUpperCase()===
O?(a(this,"onopencdata"),this.state=r.CDATA,this.cdata=this.sgmlDecl=""):"--"===this.sgmlDecl+g?(this.state=r.COMMENT,this.sgmlDecl=this.comment=""):(this.sgmlDecl+g).toUpperCase()===Q?(this.state=r.DOCTYPE,(this.doctype||this.sawRoot)&&x(this,"Inappropriately located doctype declaration"),this.sgmlDecl=this.doctype=""):">"===g?(a(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=r.TEXT):(v(L,g)&&(this.state=r.SGML_DECL_QUOTED),this.sgmlDecl+=g);continue;case r.SGML_DECL_QUOTED:g===
this.q&&(this.state=r.SGML_DECL,this.q="");this.sgmlDecl+=g;continue;case r.DOCTYPE:">"===g?(this.state=r.TEXT,a(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=g,"["===g?this.state=r.DOCTYPE_DTD:v(L,g)&&(this.state=r.DOCTYPE_QUOTED,this.q=g));continue;case r.DOCTYPE_QUOTED:this.doctype+=g;g===this.q&&(this.q="",this.state=r.DOCTYPE);continue;case r.DOCTYPE_DTD:this.doctype+=g;"]"===g?this.state=r.DOCTYPE:v(L,g)&&(this.state=r.DOCTYPE_DTD_QUOTED,this.q=g);continue;case r.DOCTYPE_DTD_QUOTED:this.doctype+=
g;g===this.q&&(this.state=r.DOCTYPE_DTD,this.q="");continue;case r.COMMENT:"-"===g?this.state=r.COMMENT_ENDING:this.comment+=g;continue;case r.COMMENT_ENDING:"-"===g?(this.state=r.COMMENT_ENDED,(this.comment=z(this.opt,this.comment))&&a(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+g,this.state=r.COMMENT);continue;case r.COMMENT_ENDED:">"!==g?(x(this,"Malformed comment"),this.comment+="--"+g,this.state=r.COMMENT):this.state=r.TEXT;continue;case r.CDATA:"]"===g?this.state=r.CDATA_ENDING:
this.cdata+=g;continue;case r.CDATA_ENDING:"]"===g?this.state=r.CDATA_ENDING_2:(this.cdata+="]"+g,this.state=r.CDATA);continue;case r.CDATA_ENDING_2:">"===g?(this.cdata&&a(this,"oncdata",this.cdata),a(this,"onclosecdata"),this.cdata="",this.state=r.TEXT):"]"===g?this.cdata+="]":(this.cdata+="]]"+g,this.state=r.CDATA);continue;case r.PROC_INST:"?"===g?this.state=r.PROC_INST_ENDING:v(H,g)?this.state=r.PROC_INST_BODY:this.procInstName+=g;continue;case r.PROC_INST_BODY:if(!this.procInstBody&&v(H,g))continue;
else"?"===g?this.state=r.PROC_INST_ENDING:this.procInstBody+=g;continue;case r.PROC_INST_ENDING:">"===g?(a(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),this.procInstName=this.procInstBody="",this.state=r.TEXT):(this.procInstBody+="?"+g,this.state=r.PROC_INST_BODY);continue;case r.OPEN_TAG:if(v(T,g))this.tagName+=g;else{this.strict||(this.tagName=this.tagName[this.looseCase]());m=this.tags[this.tags.length-1]||this;var n=this.tag={name:this.tagName,attributes:{}};
this.opt.xmlns&&(n.ns=m.ns);this.attribList.length=0;a(this,"onopentagstart",n);">"===g?B(this):"/"===g?this.state=r.OPEN_TAG_SLASH:(v(H,g)||x(this,"Invalid character in tag name"),this.state=r.ATTRIB)}continue;case r.OPEN_TAG_SLASH:">"===g?(B(this,!0),d(this)):(x(this,"Forward-slash in opening tag not followed by >"),this.state=r.ATTRIB);continue;case r.ATTRIB:if(v(H,g))continue;else">"===g?B(this):"/"===g?this.state=r.OPEN_TAG_SLASH:v(P,g)?(this.attribName=g,this.attribValue="",this.state=r.ATTRIB_NAME):
x(this,"Invalid attribute name");continue;case r.ATTRIB_NAME:"="===g?this.state=r.ATTRIB_VALUE:">"===g?(x(this,"Attribute without value"),this.attribValue=this.attribName,J(this),B(this)):v(H,g)?this.state=r.ATTRIB_NAME_SAW_WHITE:v(T,g)?this.attribName+=g:x(this,"Invalid attribute name");continue;case r.ATTRIB_NAME_SAW_WHITE:if("="===g)this.state=r.ATTRIB_VALUE;else if(v(H,g))continue;else x(this,"Attribute without value"),this.attribValue=this.tag.attributes[this.attribName]="",a(this,"onattribute",
{name:this.attribName,value:""}),this.attribName="",">"===g?B(this):v(P,g)?(this.attribName=g,this.state=r.ATTRIB_NAME):(x(this,"Invalid attribute name"),this.state=r.ATTRIB);continue;case r.ATTRIB_VALUE:if(v(H,g))continue;else v(L,g)?(this.q=g,this.state=r.ATTRIB_VALUE_QUOTED):(x(this,"Unquoted attribute value"),this.state=r.ATTRIB_VALUE_UNQUOTED,this.attribValue=g);continue;case r.ATTRIB_VALUE_QUOTED:if(g!==this.q){"&"===g?this.state=r.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=g;continue}J(this);
this.q="";this.state=r.ATTRIB_VALUE_CLOSED;continue;case r.ATTRIB_VALUE_CLOSED:v(H,g)?this.state=r.ATTRIB:">"===g?B(this):"/"===g?this.state=r.OPEN_TAG_SLASH:v(P,g)?(x(this,"No whitespace between attributes"),this.attribName=g,this.attribValue="",this.state=r.ATTRIB_NAME):x(this,"Invalid attribute name");continue;case r.ATTRIB_VALUE_UNQUOTED:if(!v(C,g)){"&"===g?this.state=r.ATTRIB_VALUE_ENTITY_U:this.attribValue+=g;continue}J(this);">"===g?B(this):this.state=r.ATTRIB;continue;case r.CLOSE_TAG:if(this.tagName)">"===
g?d(this):v(T,g)?this.tagName+=g:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=r.SCRIPT):(v(H,g)||x(this,"Invalid tagname in closing tag"),this.state=r.CLOSE_TAG_SAW_WHITE);else if(v(H,g))continue;else v(P,g)?this.tagName=g:this.script?(this.script+="</"+g,this.state=r.SCRIPT):x(this,"Invalid tagname in closing tag.");continue;case r.CLOSE_TAG_SAW_WHITE:if(v(H,g))continue;">"===g?d(this):x(this,"Invalid characters in closing tag");continue;case r.TEXT_ENTITY:case r.ATTRIB_VALUE_ENTITY_Q:case r.ATTRIB_VALUE_ENTITY_U:switch(this.state){case r.TEXT_ENTITY:var q=
r.TEXT;var l="textNode";break;case r.ATTRIB_VALUE_ENTITY_Q:q=r.ATTRIB_VALUE_QUOTED;l="attribValue";break;case r.ATTRIB_VALUE_ENTITY_U:q=r.ATTRIB_VALUE_UNQUOTED,l="attribValue"}";"===g?(this[l]+=w(this),this.entity="",this.state=q):v(this.entity.length?V:U,g)?this.entity+=g:(x(this,"Invalid character in entity name"),this[l]+="&"+this.entity+g,this.entity="",this.state=q);continue;default:throw Error(this,"Unknown state: "+this.state);}}if(this.position>=this.bufferCheckPosition){c=Math.max(b.MAX_BUFFER_LENGTH,
10);g=e=0;for(q=K.length;g<q;g++){l=this[K[g]].length;if(l>c)switch(K[g]){case "textNode":h(this);break;case "cdata":a(this,"oncdata",this.cdata);this.cdata="";break;case "script":a(this,"onscript",this.script);this.script="";break;default:k(this,"Max buffer length exceeded: "+K[g])}e=Math.max(e,l)}this.bufferCheckPosition=b.MAX_BUFFER_LENGTH-e+this.position}return this},resume:function(){this.error=null;return this},close:function(){return this.write(null)},flush:function(){h(this);""!==this.cdata&&
(a(this,"oncdata",this.cdata),this.cdata="");""!==this.script&&(a(this,"onscript",this.script),this.script="")}};try{var q=c("stream").Stream}catch(N){q=function(){}}var M=b.EVENTS.filter(function(a){return"error"!==a&&"end"!==a});l.prototype=Object.create(q.prototype,{constructor:{value:l}});l.prototype.write=function(a){"function"===typeof n&&"function"===typeof n.isBuffer&&n.isBuffer(a)&&(this._decoder||(this._decoder=new (c("string_decoder").StringDecoder)("utf8")),a=this._decoder.write(a));this._parser.write(a.toString());
this.emit("data",a);return!0};l.prototype.end=function(a){a&&a.length&&this.write(a);this._parser.end();return!0};l.prototype.on=function(a,b){var d=this;d._parser["on"+a]||-1===M.indexOf(a)||(d._parser["on"+a]=function(){var b=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);b.splice(0,0,a);d.emit.apply(d,b)});return q.prototype.on.call(d,a,b)};var H="\r\n\t ",y="0124356789",A="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",L="'\"",C=H+">",O="[CDATA[",Q="DOCTYPE",e="http://www.w3.org/XML/1998/namespace",
g="http://www.w3.org/2000/xmlns/",I={xml:e,xmlns:g};H=u(H);y=u(y);A=u(A);var P=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,T=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,U=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,
V=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;L=u(L);C=u(C);var r=0;b.STATE={BEGIN:r++,BEGIN_WHITESPACE:r++,TEXT:r++,TEXT_ENTITY:r++,OPEN_WAKA:r++,SGML_DECL:r++,SGML_DECL_QUOTED:r++,DOCTYPE:r++,DOCTYPE_QUOTED:r++,DOCTYPE_DTD:r++,DOCTYPE_DTD_QUOTED:r++,COMMENT_STARTING:r++,COMMENT:r++,COMMENT_ENDING:r++,COMMENT_ENDED:r++,CDATA:r++,CDATA_ENDING:r++,CDATA_ENDING_2:r++,
PROC_INST:r++,PROC_INST_BODY:r++,PROC_INST_ENDING:r++,OPEN_TAG:r++,OPEN_TAG_SLASH:r++,ATTRIB:r++,ATTRIB_NAME:r++,ATTRIB_NAME_SAW_WHITE:r++,ATTRIB_VALUE:r++,ATTRIB_VALUE_QUOTED:r++,ATTRIB_VALUE_CLOSED:r++,ATTRIB_VALUE_UNQUOTED:r++,ATTRIB_VALUE_ENTITY_Q:r++,ATTRIB_VALUE_ENTITY_U:r++,CLOSE_TAG:r++,CLOSE_TAG_SAW_WHITE:r++,SCRIPT:r++,SCRIPT_ENDING:r++};b.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"};b.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,
Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,
ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,
Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,
zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,
ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};Object.keys(b.ENTITIES).forEach(function(a){var d=b.ENTITIES[a];d="number"===
typeof d?String.fromCharCode(d):d;b.ENTITIES[a]=d});for(var S in b.STATE)b.STATE[b.STATE[S]]=S;r=b.STATE;String.fromCodePoint||function(){var a=String.fromCharCode,b=Math.floor,d=function(){var d=[],c=-1,f=arguments.length;if(!f)return"";for(var g="";++c<f;){var h=Number(arguments[c]);if(!isFinite(h)||0>h||1114111<h||b(h)!==h)throw RangeError("Invalid code point: "+h);if(65535>=h)d.push(h);else{h-=65536;var e=(h>>10)+55296;h=h%1024+56320;d.push(e,h)}if(c+1===f||16384<d.length)g+=a.apply(null,d),d.length=
0}return g};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:d,configurable:!0,writable:!0}):String.fromCodePoint=d}()})("undefined"===typeof l?this.sax={}:l)}).call(this,c("buffer").Buffer)},{buffer:5,stream:27,string_decoder:3}],27:[function(c,u,l){function n(){b.call(this)}u.exports=n;var b=c("events").EventEmitter;c("inherits")(n,b);n.Readable=c("readable-stream/readable.js");n.Writable=c("readable-stream/writable.js");n.Duplex=c("readable-stream/duplex.js");n.Transform=
c("readable-stream/transform.js");n.PassThrough=c("readable-stream/passthrough.js");n.Stream=n;n.prototype.pipe=function(c,n){function m(a){c.writable&&!1===c.write(a)&&p.pause&&p.pause()}function l(){p.readable&&p.resume&&p.resume()}function a(){x||(x=!0,c.end())}function h(){x||(x=!0,"function"===typeof c.destroy&&c.destroy())}function z(a){k();if(0===b.listenerCount(this,"error"))throw a;}function k(){p.removeListener("data",m);c.removeListener("drain",l);p.removeListener("end",a);p.removeListener("close",
h);p.removeListener("error",z);c.removeListener("error",z);p.removeListener("end",k);p.removeListener("close",k);c.removeListener("close",k)}var p=this;p.on("data",m);c.on("drain",l);c._isStdio||n&&!1===n.end||(p.on("end",a),p.on("close",h));var x=!1;p.on("error",z);c.on("error",z);p.on("end",k);p.on("close",k);c.on("close",k);c.emit("pipe",p);return c}},{events:7,inherits:9,"readable-stream/duplex.js":14,"readable-stream/passthrough.js":21,"readable-stream/readable.js":22,"readable-stream/transform.js":23,
"readable-stream/writable.js":24}],28:[function(c,u,l){function n(b){return b.toString(this.encoding)}function b(b){this.charLength=(this.charReceived=b.length%2)?2:0}function m(b){this.charLength=(this.charReceived=b.length%3)?3:0}var p=c("buffer").Buffer,D=p.isEncoding||function(b){switch(b&&b.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};c=l.StringDecoder=
function(c){this.encoding=(c||"utf8").toLowerCase().replace(/[-_]/,"");if(c&&!D(c))throw Error("Unknown encoding: "+c);switch(this.encoding){case "utf8":this.surrogateSize=3;break;case "ucs2":case "utf16le":this.surrogateSize=2;this.detectIncompleteChar=b;break;case "base64":this.surrogateSize=3;this.detectIncompleteChar=m;break;default:this.write=n;return}this.charBuffer=new p(6);this.charLength=this.charReceived=0};c.prototype.write=function(b){for(var a="";this.charLength;){a=b.length>=this.charLength-
this.charReceived?this.charLength-this.charReceived:b.length;b.copy(this.charBuffer,this.charReceived,0,a);this.charReceived+=a;if(this.charReceived<this.charLength)return"";b=b.slice(a,b.length);a=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var c=a.charCodeAt(a.length-1);if(55296<=c&&56319>=c)this.charLength+=this.surrogateSize,a="";else{this.charReceived=this.charLength=0;if(0===b.length)return a;break}}this.detectIncompleteChar(b);var m=b.length;this.charLength&&(b.copy(this.charBuffer,
0,b.length-this.charReceived,m),m-=this.charReceived);a+=b.toString(this.encoding,0,m);m=a.length-1;c=a.charCodeAt(m);return 55296<=c&&56319>=c?(c=this.surrogateSize,this.charLength+=c,this.charReceived+=c,this.charBuffer.copy(this.charBuffer,c,0,c),b.copy(this.charBuffer,0,0,c),a.substring(0,m)):a};c.prototype.detectIncompleteChar=function(b){for(var a=3<=b.length?3:b.length;0<a;a--){var c=b[b.length-a];if(1==a&&6==c>>5){this.charLength=2;break}if(2>=a&&14==c>>4){this.charLength=3;break}if(3>=a&&
30==c>>3){this.charLength=4;break}}this.charReceived=a};c.prototype.end=function(b){var a="";b&&b.length&&(a=this.write(b));this.charReceived&&(b=this.encoding,a+=this.charBuffer.slice(0,this.charReceived).toString(b));return a}},{buffer:5}],29:[function(c,u,l){(function(n,b){function m(a,b){this._id=a;this._clearFn=b}var p=c("process/browser.js").nextTick,u=Function.prototype.apply,v=Array.prototype.slice,a={},h=0;l.setTimeout=function(){return new m(u.call(setTimeout,window,arguments),clearTimeout)};
l.setInterval=function(){return new m(u.call(setInterval,window,arguments),clearInterval)};l.clearTimeout=l.clearInterval=function(a){a.close()};m.prototype.unref=m.prototype.ref=function(){};m.prototype.close=function(){this._clearFn.call(window,this._id)};l.enroll=function(a,b){clearTimeout(a._idleTimeoutId);a._idleTimeout=b};l.unenroll=function(a){clearTimeout(a._idleTimeoutId);a._idleTimeout=-1};l._unrefActive=l.active=function(a){clearTimeout(a._idleTimeoutId);var b=a._idleTimeout;0<=b&&(a._idleTimeoutId=
setTimeout(function(){a._onTimeout&&a._onTimeout()},b))};l.setImmediate="function"===typeof n?n:function(b){var c=h++,m=2>arguments.length?!1:v.call(arguments,1);a[c]=!0;p(function(){a[c]&&(m?b.apply(null,m):b.call(null),l.clearImmediate(c))});return c};l.clearImmediate="function"===typeof b?b:function(b){delete a[b]}}).call(this,c("timers").setImmediate,c("timers").clearImmediate)},{"process/browser.js":13,timers:29}],30:[function(c,u,l){(function(c){function b(b){try{if(!c.localStorage)return!1}catch(p){return!1}b=
c.localStorage[b];return null==b?!1:"true"===String(b).toLowerCase()}u.exports=function(c,n){if(b("noDeprecation"))return c;var m=!1;return function(){if(!m){if(b("throwDeprecation"))throw Error(n);b("traceDeprecation")?console.trace(n):console.warn(n);m=!0}return c.apply(this,arguments)}}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],31:[function(c,u,l){(function(c,b,m,l,u){function n(a){if("contents"in a){var b="styleAttrs"in
a?a.styleAttrs[l.byName.ruby.qname]:null;b="span"===a.kind&&("container"===b||"textContainer"===b||"baseContainer"===b);for(var d=a.contents.length-1;0<=d;d--)!b||"styleAttrs"in a.contents[d]&&l.byName.ruby.qname in a.contents[d].styleAttrs?n(a.contents[d]):delete a.contents[d]}}function a(b,d,c,f){var g=f&&"seq"===f.timeContainer,e=0;f&&(e=g&&c?c.end:f.begin);d.begin=d.explicit_begin?d.explicit_begin+e:e;c=d.begin;f=null;if("sets"in d)for(var h=0;h<d.sets.length;h++)a(b,d.sets[h],f,d),c="seq"===
d.timeContainer?d.sets[h].end:Math.max(c,d.sets[h].end),f=d.sets[h];if(!("contents"in d))c=g?d.begin:Number.POSITIVE_INFINITY;else if("contents"in d)for(g=0;g<d.contents.length;g++)a(b,d.contents[g],f,d),c="seq"===d.timeContainer?d.contents[g].end:Math.max(c,d.contents[g].end),f=d.contents[g];d.end=null!==d.explicit_end&&null!==d.explicit_dur?Math.min(d.begin+d.explicit_dur,e+d.explicit_end):null===d.explicit_end&&null!==d.explicit_dur?d.begin+d.explicit_dur:null!==d.explicit_end&&null===d.explicit_dur?
e+d.explicit_end:c;delete d.explicit_begin;delete d.explicit_dur;delete d.explicit_end;b._registerEvent(d)}function h(a){this.node=a}function p(){this.events=[];this.head=new k;this.body=null}function k(){this.styling=new E;this.layout=new D}function E(){this.styles={};this.initials={}}function x(){this.styleRefs=this.styleAttrs=this.id=null}function F(){this.styleAttrs=null}function D(){this.regions={}}function B(a,b){this.kind="image";this.src=a;this.type=b}function d(a){this.id=a}function w(a){this.regionID=
a}function f(a){this.styleAttrs=a}function t(a){this.sets=a}function K(a){this.contents=a}function q(a,b,d){this.explicit_begin=a;this.explicit_end=b;this.explicit_dur=d}function M(){this.kind="body"}function H(){this.kind="div"}function y(){this.kind="p"}function A(){this.kind="span"}function L(){this.kind="span"}function C(){this.kind="br"}function O(){}function Q(){}function e(a){return a&&"xml:id"in a.attributes?a.attributes["xml:id"].value||null:null}function g(a){return a&&"style"in a.attributes?
a.attributes.style.value.split(" "):[]}function I(a,b){var d={};if(null!==a)for(var c in a.attributes){var f=a.attributes[c].uri+" "+a.attributes[c].local,g=l.byQName[f];if(void 0!==g){var e=g.parse(a.attributes[c].value);null!==e?(d[f]=e,g===l.byName.zIndex&&N(b,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):R(b,"Cannot parse styling attribute "+f+" --\x3e "+a.attributes[c].value)}}return d}function P(a,b,d){for(var c in a.attributes)if(a.attributes[c].uri===b&&a.attributes[c].local===
d)return a.attributes[c].value;return null}function T(a,b){a=P(a,m.ns_tts,"extent");if(null===a)return null;var d=a.split(" ");if(2!==d.length)return N(b,"Malformed extent (ignoring)"),null;a=u.parseLength(d[0]);d=u.parseLength(d[1]);return d&&a?{h:d,w:a}:(N(b,"Malformed extent values (ignoring)"),null)}function U(a,b,d){var c=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/,f=/^(\d{2,}):(\d\d):(\d\d):(\d{2,})$/,g=/^(\d+(?:\.\d+)?)t$/,e=/^(\d+(?:\.\d+)?)ms$/,h=/^(\d+(?:\.\d+)?)s$/,m=/^(\d+(?:\.\d+)?)h$/,n=/^(\d+(?:\.\d+)?)m$/,
t,k=null;null!==(t=/^(\d+(?:\.\d+)?)f$/.exec(d))?null!==b&&(k=parseFloat(t[1])/b):null!==(t=g.exec(d))?null!==a&&(k=parseFloat(t[1])/a):null!==(t=e.exec(d))?k=parseFloat(t[1])/1E3:null!==(t=h.exec(d))?k=parseFloat(t[1]):null!==(t=m.exec(d))?k=3600*parseFloat(t[1]):null!==(t=n.exec(d))?k=60*parseFloat(t[1]):null!==(t=c.exec(d))?k=3600*parseInt(t[1])+60*parseInt(t[2])+parseFloat(t[3]):null!==(t=f.exec(d))&&null!==b&&(k=3600*parseInt(t[1])+60*parseInt(t[2])+parseInt(t[3])+(null===t[4]?0:parseInt(t[4])/
b));return k}function V(a,b,d){for(;0<b.styleRefs.length;){var c=b.styleRefs.pop();c in a.styles?(V(a,a.styles[c],d),S(a.styles[c].styleAttrs,b.styleAttrs)):R(d,"Non-existant style id referenced")}}function r(a,b,d,c){for(var f=b.length-1;0<=f;f--){var g=b[f];g in a.styles?S(a.styles[g].styleAttrs,d):R(c,"Non-existant style id referenced")}}function S(a,b){for(var d in a)a.hasOwnProperty(d)&&(d in b||(b[d]=a[d]))}function N(a,b){if(a&&a.warn&&a.warn(b))throw b;}function R(a,b){if(a&&a.error&&a.error(b))throw b;
}function G(a,b){a&&a.fatal&&a.fatal(b);throw b;}function X(a,b){for(var d=0,c=a.length-1,f;d<=c;){f=Math.floor((d+c)/2);var g=a[f];if(g<b)d=f+1;else if(g>b)c=f-1;else return{found:!0,index:f}}return{found:!1,index:d}}c.fromXML=function(d,c,f){var g=b.parser(!0,{xmlns:!0}),e=[],t=[],q=[],w=0,z=null;g.onclosetag=function(a){if(e[0]instanceof O)null!==z.head&&null!==z.head.styling&&r(z.head.styling,e[0].styleRefs,e[0].styleAttrs,c),delete e[0].styleRefs;else if(e[0]instanceof E)for(var b in e[0].styles)e[0].styles.hasOwnProperty(b)&&
V(e[0],e[0].styles[b],c);else if(e[0]instanceof y||e[0]instanceof A){if(1<e[0].contents.length){a=[e[0].contents[0]];for(b=1;b<e[0].contents.length;b++)e[0].contents[b]instanceof L&&a[a.length-1]instanceof L?a[a.length-1].text+=e[0].contents[b].text:a.push(e[0].contents[b]);e[0].contents=a}e[0]instanceof A&&1===e[0].contents.length&&e[0].contents[0]instanceof L&&(e[0].text=e[0].contents[0].text,delete e[0].contents)}else if(e[0]instanceof h)if(e[0].node.uri===m.ns_tt&&"metadata"===e[0].node.local)w--;
else if(0<w&&f&&"onCloseTag"in f)f.onCloseTag();q.shift();t.shift();e.shift()};g.ontext=function(a){if(void 0!==e[0])if(e[0]instanceof A||e[0]instanceof y){if(e[0]instanceof A){var b=e[0].styleAttrs[l.byName.ruby.qname];if("container"===b||"textContainer"===b||"baseContainer"===b)return}b=new L;b.initFromText(z,e[0],a,t[0],q[0],c);e[0].contents.push(b)}else if(e[0]instanceof h&&0<w&&f&&"onText"in f)f.onText(a)};g.onopentag=function(a){var b=a.attributes["xml:space"];b?q.unshift(b.value):0===q.length?
q.unshift("default"):q.unshift(q[0]);(b=a.attributes["xml:lang"])?t.unshift(b.value):0===t.length?t.unshift(""):t.unshift(t[0]);if(a.uri===m.ns_tt)if("tt"===a.local)null!==z&&G(c,"Two <tt> elements at ("+this.line+","+this.column+")"),z=new p,z.initFromNode(a,t[0],c),e.unshift(z);else if("head"===a.local)e[0]instanceof p||G(c,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),e.unshift(z.head);else if("styling"===a.local)e[0]instanceof k||G(c,"Parent of <styling> element is not <head> at ("+
this.line+","+this.column+")"),e.unshift(z.head.styling);else if("style"===a.local)if(e[0]instanceof E){var d=new x;d.initFromNode(a,c);d.id?z.head.styling.styles[d.id]=d:R(c,"<style> element missing @id attribute");e.unshift(d)}else e[0]instanceof O?(d=new x,d.initFromNode(a,c),S(d.styleAttrs,e[0].styleAttrs),e.unshift(d)):G(c,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")");else if("initial"===a.local)if(e[0]instanceof E){b=new F;b.initFromNode(a,c);for(d in b.styleAttrs)b.styleAttrs.hasOwnProperty(d)&&
(z.head.styling.initials[d]=b.styleAttrs[d]);e.unshift(b)}else G(c,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")");else if("layout"===a.local)e[0]instanceof k||G(c,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),e.unshift(z.head.layout);else if("region"===a.local)e[0]instanceof D||G(c,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")"),d=new O,d.initFromNode(z,a,t[0],c),!d.id||d.id in z.head.layout.regions?
R(c,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):z.head.layout.regions[d.id]=d,e.unshift(d);else if("body"===a.local)e[0]instanceof p||G(c,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==z.body&&G(c,"Second <body> element at "+this.line+","+this.column+")"),d=new M,d.initFromNode(z,a,t[0],c),z.body=d,e.unshift(d);else if("div"===a.local){e[0]instanceof H||e[0]instanceof M||G(c,"Parent of <div> element is not <body> or <div> at "+
this.line+","+this.column+")");d=new H;d.initFromNode(z,e[0],a,t[0],c);if(b=d.styleAttrs[l.byName.backgroundImage.qname])d.contents.push(new B(b)),delete d.styleAttrs[l.byName.backgroundImage.qname];e[0].contents.push(d);e.unshift(d)}else"image"===a.local?(e[0]instanceof H||G(c,"Parent of <image> element is not <div> at "+this.line+","+this.column+")"),d=new B,d.initFromNode(z,e[0],a,t[0],c),e[0].contents.push(d),e.unshift(d)):"p"===a.local?(e[0]instanceof H||G(c,"Parent of <p> element is not <div> at "+
this.line+","+this.column+")"),d=new y,d.initFromNode(z,e[0],a,t[0],c),e[0].contents.push(d),e.unshift(d)):"span"===a.local?(e[0]instanceof A||e[0]instanceof y||G(c,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")"),d=new A,d.initFromNode(z,e[0],a,t[0],q[0],c),e[0].contents.push(d),e.unshift(d)):"br"===a.local?(e[0]instanceof A||e[0]instanceof y||G(c,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")"),d=new C,d.initFromNode(z,e[0],a,t[0],
c),e[0].contents.push(d),e.unshift(d)):"set"===a.local?(e[0]instanceof A||e[0]instanceof y||e[0]instanceof H||e[0]instanceof M||e[0]instanceof O||e[0]instanceof C||G(c,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")"),d=new Q,d.initFromNode(z,e[0],a,c),e[0].sets.push(d),e.unshift(d)):e.unshift(new h(a));else e.unshift(new h(a));if(e[0]instanceof h)if(a.uri===m.ns_tt&&"metadata"===a.local)w++;else if(0<w&&f&&"onOpenTag"in f){d=[];for(var g in a.attributes)d[a.attributes[g].uri+
" "+a.attributes[g].local]={uri:a.attributes[g].uri,local:a.attributes[g].local,value:a.attributes[g].value};f.onOpenTag(a.uri,a.local,d)}};g.write(d).close();delete z.head.styling.styles;d=!1;for(var u in z.head.layout.regions)if(z.head.layout.regions.hasOwnProperty(u)){d=!0;break}d||(u=O.prototype.createDefaultRegion(z.lang),z.head.layout.regions[u.id]=u);for(var K in z.head.layout.regions)z.head.layout.regions.hasOwnProperty(K)&&a(z,z.head.layout.regions[K],null,null);z.body&&a(z,z.body,null,null);
z.body&&n(z.body);return z};p.prototype.initFromNode=function(a,b,d){var c=P(a,m.ns_ttp,"cellResolution"),f=15;var e=32;null!==c&&(c=/(\d+) (\d+)/.exec(c),null!==c?(e=parseInt(c[1]),f=parseInt(c[2])):N(d,"Malformed cellResolution value (using initial value instead)"));this.cellLength={h:new u.ComputedLength(0,1/f),w:new u.ComputedLength(1/e,0)};f=P(a,m.ns_ttp,"frameRate");c=30;null!==f&&(e=/(\d+)/.exec(f),null!==e?c=parseInt(e[1]):N(d,"Malformed frame rate attribute (using initial value instead)"));
e=P(a,m.ns_ttp,"frameRateMultiplier");var g=1;null!==e&&(e=/(\d+) (\d+)/.exec(e),null!==e?g=parseInt(e[1])/parseInt(e[2]):N(d,"Malformed frame rate multiplier attribute (using initial value instead)"));c*=g;g=1;e=P(a,m.ns_ttp,"tickRate");null===e?null!==f&&(g=c):(e=/(\d+)/.exec(e),null!==e?g=parseInt(e[1]):N(d,"Malformed tick rate attribute (using initial value instead)"));this.effectiveFrameRate=c;this.tickRate=g;e=P(a,m.ns_ittp,"aspectRatio");null===e&&(e=P(a,m.ns_ttp,"displayAspectRatio"));f=null;
null!==e&&(c=/(\d+)\s+(\d+)/.exec(e),null!==c?(e=parseInt(c[1]),c=parseInt(c[2]),0!==e&&0!==c?f=e/c:R(d,"Illegal aspectRatio values (ignoring)")):R(d,"Malformed aspectRatio attribute (ignoring)"));this.aspectRatio=f;f=P(a,m.ns_ttp,"timeBase");null!==f&&"media"!==f&&G(d,"Unsupported time base");a=T(a,d);null===a?this.pxLength={h:null,w:null}:("px"===a.h.unit&&"px"===a.w.unit||G(d,"Extent on TT must be in px or absent"),this.pxLength={h:new u.ComputedLength(0,1/a.h.value),w:new u.ComputedLength(1/a.w.value,
0)});this.dimensions={h:new u.ComputedLength(0,1),w:new u.ComputedLength(1,0)};this.lang=b};p.prototype._registerEvent=function(a){if(!(a.end<=a.begin)){var b=X(this.events,a.begin);b.found||this.events.splice(b.index,0,a.begin);a.end!==Number.POSITIVE_INFINITY&&(b=X(this.events,a.end),b.found||this.events.splice(b.index,0,a.end))}};p.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]};p.prototype.getMediaTimeEvents=function(){return this.events};x.prototype.initFromNode=
function(a,b){this.id=e(a);this.styleAttrs=I(a,b);this.styleRefs=g(a)};F.prototype.initFromNode=function(a,b){this.styleAttrs={};for(var d in a.attributes)if(a.attributes[d].uri===m.ns_itts||a.attributes[d].uri===m.ns_ebutts||a.attributes[d].uri===m.ns_tts)this.styleAttrs[a.attributes[d].uri+" "+a.attributes[d].local]=a.attributes[d].value};B.prototype.initFromNode=function(a,b,d,c,e){(this.src="src"in d.attributes?d.attributes.src.value:null)||R(e,"Invalid image@src attribute");(this.type="type"in
d.attributes?d.attributes.type.value:null)||R(e,"Invalid image@type attribute");f.prototype.initFromNode.call(this,a,b,d,e);q.prototype.initFromNode.call(this,a,b,d,e);t.prototype.initFromNode.call(this,a,b,d,e);w.prototype.initFromNode.call(this,a,b,d,e);this.lang=c};d.prototype.initFromNode=function(a,b,d,c){this.id=e(d)};w.prototype.initFromNode=function(a,b,d,c){this.regionID=d&&"region"in d.attributes?d.attributes.region.value:""};f.prototype.initFromNode=function(a,b,d,c){this.styleAttrs=I(d,
c);null!==a.head&&null!==a.head.styling&&r(a.head.styling,g(d),this.styleAttrs,c)};t.prototype.initFromNode=function(a,b,d,c){this.sets=[]};K.prototype.initFromNode=function(a,b,d,c){this.contents=[]};q.prototype.initFromNode=function(a,b,d,c){b=null;d&&"begin"in d.attributes&&(b=U(a.tickRate,a.effectiveFrameRate,d.attributes.begin.value),null===b&&N(c,"Malformed begin value "+d.attributes.begin.value+" (using 0)"));var f=null;d&&"dur"in d.attributes&&(f=U(a.tickRate,a.effectiveFrameRate,d.attributes.dur.value),
null===f&&N(c,"Malformed dur value "+d.attributes.dur.value+" (ignoring)"));var e=null;d&&"end"in d.attributes&&(e=U(a.tickRate,a.effectiveFrameRate,d.attributes.end.value),null===e&&N(c,"Malformed end value (ignoring)"));this.explicit_begin=b;this.explicit_end=e;this.explicit_dur=f;(a=d&&"timeContainer"in d.attributes?d.attributes.timeContainer.value:null)&&"par"!==a?"seq"===a?c="seq":(R(c,"Illegal value of timeContainer (assuming 'par')"),c="par"):c="par";this.timeContainer=c};M.prototype.initFromNode=
function(a,b,d,c){f.prototype.initFromNode.call(this,a,null,b,c);q.prototype.initFromNode.call(this,a,null,b,c);t.prototype.initFromNode.call(this,a,null,b,c);w.prototype.initFromNode.call(this,a,null,b,c);K.prototype.initFromNode.call(this,a,null,b,c);this.lang=d};H.prototype.initFromNode=function(a,b,d,c,e){f.prototype.initFromNode.call(this,a,b,d,e);q.prototype.initFromNode.call(this,a,b,d,e);t.prototype.initFromNode.call(this,a,b,d,e);w.prototype.initFromNode.call(this,a,b,d,e);K.prototype.initFromNode.call(this,
a,b,d,e);this.lang=c};y.prototype.initFromNode=function(a,b,d,c,e){f.prototype.initFromNode.call(this,a,b,d,e);q.prototype.initFromNode.call(this,a,b,d,e);t.prototype.initFromNode.call(this,a,b,d,e);w.prototype.initFromNode.call(this,a,b,d,e);K.prototype.initFromNode.call(this,a,b,d,e);this.lang=c};A.prototype.initFromNode=function(a,b,d,c,e,g){f.prototype.initFromNode.call(this,a,b,d,g);q.prototype.initFromNode.call(this,a,b,d,g);t.prototype.initFromNode.call(this,a,b,d,g);w.prototype.initFromNode.call(this,
a,b,d,g);K.prototype.initFromNode.call(this,a,b,d,g);this.space=e;this.lang=c};L.prototype.initFromText=function(a,b,d,c,f,e){q.prototype.initFromNode.call(this,a,b,null,e);this.text=d;this.space=f;this.lang=c};C.prototype.initFromNode=function(a,b,d,c,f){w.prototype.initFromNode.call(this,a,b,d,f);q.prototype.initFromNode.call(this,a,b,d,f);this.lang=c};O.prototype.createDefaultRegion=function(a){var b=new O;b.id="";b.styleAttrs={};b.sets=[];q.call(b,0,Number.POSITIVE_INFINITY,null);this.lang=a;
return b};O.prototype.initFromNode=function(a,b,c,f){d.prototype.initFromNode.call(this,a,null,b,f);q.prototype.initFromNode.call(this,a,null,b,f);t.prototype.initFromNode.call(this,a,null,b,f);this.styleAttrs=I(b,f);this.styleRefs=g(b);this.lang=c};Q.prototype.initFromNode=function(a,b,d,c){q.prototype.initFromNode.call(this,a,b,d,c);a=I(d,c);this.value=this.qname=null;for(var f in a)if(a.hasOwnProperty(f)){if(this.qname){R(c,"More than one style specified on set");break}this.qname=f;this.value=
a[f]}}})("undefined"===typeof l?this.imscDoc={}:l,"undefined"===typeof sax?c("sax"):sax,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscStyles?c("./styles"):imscStyles,"undefined"===typeof imscUtils?c("./utils"):imscUtils)},{"./names":35,"./styles":36,"./utils":37,sax:26}],32:[function(c,u,l){(function(c,b,m){function n(b,c,f,t){if("region"===f.kind){var d=document.createElement("div");d.style.position="absolute"}else if("body"===f.kind)d=document.createElement("div");
else if("div"===f.kind)d=document.createElement("div");else if("image"===f.kind){if(d=document.createElement("img"),null!==b.imgResolver&&null!==f.src){var k=b.imgResolver(f.src,d);k&&(d.src=k);d.height=b.regionH;d.width=b.regionW}}else if("p"===f.kind)d=document.createElement("p");else if("span"===f.kind)if("container"===f.styleAttrs[m.byName.ruby.qname])d=document.createElement("ruby"),b.ruby=!0;else if("base"===f.styleAttrs[m.byName.ruby.qname])d=document.createElement("rb");else if("text"===f.styleAttrs[m.byName.ruby.qname])d=
document.createElement("rt");else if("baseContainer"===f.styleAttrs[m.byName.ruby.qname])d=document.createElement("rbc");else if("textContainer"===f.styleAttrs[m.byName.ruby.qname])d=document.createElement("rtc");else{if("delimiter"===f.styleAttrs[m.byName.ruby.qname])return;d=document.createElement("span")}else"br"===f.kind&&(d=document.createElement("br"));if(d){!f.lang||"region"!==f.kind&&f.lang===t.lang||(d.lang=f.lang);c.appendChild(d);d.style.margin="0";if("region"===f.kind)if(c=f.styleAttrs[m.byName.writingMode.qname],
"lrtb"===c||"lr"===c)b.ipd="lr",b.bpd="tb";else if("rltb"===c||"rl"===c)b.ipd="rl",b.bpd="tb";else if("tblr"===c)b.ipd="tb",b.bpd="lr";else{if("tbrl"===c||"tb"===c)b.ipd="tb",b.bpd="rl"}else"p"===f.kind&&"tb"===b.bpd&&(b.ipd="ltr"===f.styleAttrs[m.byName.direction.qname]?"lr":"rl");for(c=0;c<E.length;c++)t=E[c],k=f.styleAttrs[t.qname],void 0!==k&&null!==t.map&&t.map(b,d,f,k);c=d;(t=f.styleAttrs[m.byName.linePadding.qname])&&!t.isZero()&&(k=t.toUsedLength(b.w,b.h),0<k&&(k=Math.ceil(k)+"px","tb"===
b.bpd?(c.style.paddingLeft=k,c.style.paddingRight=k):(c.style.paddingTop=k,c.style.paddingBottom=k),b.lp=t));(t=f.styleAttrs[m.byName.multiRowAlign.qname])&&"auto"!==t&&(c=document.createElement("span"),c.style.display="inline-block",c.style.textAlign=t,d.appendChild(c),b.mra=t);(t=f.styleAttrs[m.byName.rubyReserve.qname])&&"none"!==t[0]&&(b.rubyReserve=t);f.styleAttrs[m.byName.fillLineGap.qname]&&(b.flg=!0);if("span"===f.kind&&f.text)if((t=f.styleAttrs[m.byName.textEmphasis.qname])&&"none"!==t.style&&
(b.textEmphasis=!0),m.byName.textCombine.qname in f.styleAttrs&&"all"===f.styleAttrs[m.byName.textCombine.qname])d.textContent=f.text,t&&z(b,d,f,t);else{k="";for(var w=0;w<f.text.length;w++){k+=f.text.charAt(w);var p=f.text.charCodeAt(w);if(55296>p||56319<p||w===f.text.length-1)p=document.createElement("span"),p.textContent=k,t&&z(b,p,f,t),d.appendChild(p),k="",p._isd_element=f}}if("contents"in f)for(t=0;t<f.contents.length;t++)n(b,c,f.contents[t],f);t=[];if("p"===f.kind){h(b,c,t,null);if(b.rubyReserve){for(k=
0;k<t.length;k++){w=document.createElement("ruby");p=document.createElement("rb");p.textContent="\u200b";w.appendChild(p);var y=b.rubyReserve[1].toUsedLength(b.w,b.h)+"px";if("both"===b.rubyReserve[0]||"outside"===b.rubyReserve[0]&&1==t.length){p=document.createElement("rtc");p.style[F]=x?"after":"under";p.textContent="\u200b";p.style.fontSize=y;var A=document.createElement("rtc");A.style[F]=x?"before":"over";A.textContent="\u200b";A.style.fontSize=y;w.appendChild(p);w.appendChild(A)}else p=document.createElement("rtc"),
p.textContent="\u200b",p.style.fontSize=y,p.style[F]="after"===b.rubyReserve[0]||"outside"===b.rubyReserve[0]&&0<k?x?"after":"tb"===b.bpd||"rl"===b.bpd?"under":"over":x?"before":"tb"===b.bpd||"rl"===b.bpd?"over":"under",w.appendChild(p);p=null;for(A=0;A<t[k].rbc.length;A++)if("ruby"===t[k].rbc[A].localName){p=t[k].rbc[A];for(A=0;A<p.style.length;A++)w.style.setProperty(p.style.item(A),p.style.getPropertyValue(p.style.item(A)));break}p=p||t[k].elements[0].node;p.parentElement.insertBefore(w,p)}b.rubyReserve=
null}if(b.ruby||b.rubyReserve){for(k=0;k<t.length;k++)for(w=0;w<t[k].rbc.length;w++)t[k].rbc[w].style[F]||(t[k].rbc[w].style[F]=x?0===k?"before":"after":"tb"===b.bpd?0===k?"over":"under":"rl"===b.bpd?0===k?"over":"under":0===k?"under":"over");b.ruby=null}if(b.textEmphasis){for(k=0;k<t.length;k++)for(w=0;w<t[k].te.length;w++)t[k].te[w].style[B]&&"none"!==t[k].te[w].style[B]||(t[k].te[w].style[B]="tb"===b.bpd?0===k?"left over":"left under":"rl"===b.bpd?0===k?"right under":"left under":0===k?"left under":
"right under");b.textEmphasis=null}if(b.mra){for(k=0;k<t.length-1;k++)p=t[k].elements.length,0!==p&&!1===t[k].br&&(w=document.createElement("br"),p=t[k].elements[p-1].node,p.parentElement.insertBefore(w,p.nextSibling));b.mra=null}if(b.lp){k=b.lp.toUsedLength(b.w,b.h);if(null!==t)for(w=0;w<t.length;w++)if(p=Math.ceil(k)+"px",A="-"+Math.ceil(k)+"px",0!==t[w].elements.length){y=t[w].elements[t[w].start_elem];var v=t[w].elements[t[w].end_elem];if(y===v&&(elementBoundingRect=y.node.getBoundingClientRect(),
0==elementBoundingRect.width||0==elementBoundingRect.height))continue;"lr"===b.ipd?(y.node.style.marginLeft=A,y.node.style.paddingLeft=p):"rl"===b.ipd?(y.node.style.paddingRight=p,y.node.style.marginRight=A):"tb"===b.ipd&&(y.node.style.paddingTop=p,y.node.style.marginTop=A);"lr"===b.ipd?(v.node.style.marginRight=A,v.node.style.paddingRight=p):"rl"===b.ipd?(v.node.style.paddingLeft=p,v.node.style.marginLeft=A):"tb"===b.ipd&&(v.node.style.paddingBottom=p,v.node.style.marginBottom=A)}b.lp=null}for(k=
0;k<t.length;k++)for(w=t[k],p=1;p<w.elements.length;){A=w.elements[p-1].node;y=w.elements[p].node;if("SPAN"===A.tagName&&"SPAN"===y.tagName&&A._isd_element===y._isd_element){A.textContent+=y.textContent;for(v=0;v<y.style.length;v++){var C=y.style[v];if(0<=C.indexOf("border")||0<=C.indexOf("padding")||0<=C.indexOf("margin"))A.style[C]=y.style[C]}y.parentElement.removeChild(y);A=!0}else A=!1;A?w.elements.splice(p,1):p++}k=[];for(A=0;A<t.length;A++)for(y=0;y<t[A].elements.length;y++)if(w=t[A].elements[y].node,
p=l(w,k,!1))w.style.backgroundColor=p;for(w=0;w<k.length;w++)k[w].style.backgroundColor="";if(b.flg){w=a(c.getBoundingClientRect(),b);k=w.before;w=w.after;p=Math.sign(w-k);for(A=0;A<=t.length;A++){y=0===A?Math.round(k):A===t.length?Math.round(w):Math.round((t[A-1].after+t[A].before)/2);if(0<A&&t[A-1])for(C=0;C<t[A-1].elements.length;C++){var D=t[A-1].elements[C];v=p*(y-D.after)+"px";"lr"===b.bpd?D.node.style.paddingRight=v:"rl"===b.bpd?D.node.style.paddingLeft=v:"tb"===b.bpd&&(D.node.style.paddingBottom=
v)}if(A<t.length)for(C=0;C<t[A].elements.length;C++)D=t[A].elements[C],v=p*(D.before-y)+"px","lr"===b.bpd?D.node.style.paddingLeft=v:"rl"===b.bpd?D.node.style.paddingRight=v:"tb"===b.bpd&&(D.node.style.paddingTop=v)}b.flg=null}}"region"===f.kind&&"tb"===b.bpd&&b.enableRollUp&&0<f.contents.length&&"after"===f.styleAttrs[m.byName.displayAlign.qname]&&(h(b,c,t,null),f=new u(""===f.id?"_":f.id,t),b.currentISDState[f.id]=f,b.previousISDState&&f.id in b.previousISDState&&0<b.previousISDState[f.id].plist.length&&
1<f.plist.length&&f.plist[f.plist.length-2].text===b.previousISDState[f.id].plist[b.previousISDState[f.id].plist.length-1].text&&(b=d.firstElementChild,f=f.plist[f.plist.length-1].after-f.plist[f.plist.length-1].before,b.style.bottom="-"+f+"px",b.style.transition="transform 0.4s",b.style.position="relative",b.style.transform="translateY(-"+f+"px)"))}else if(b=b.errorHandler,f="Error processing ISD element kind: "+f.kind,b&&b.error&&b.error(f))throw f;}function l(a,b,c){if(a.style.backgroundColor)return c&&
!b.includes(a)&&b.push(a),a.style.backgroundColor;if("SPAN"===a.parentElement.nodeName)return l(a.parentElement,b,!0)}function u(a,b){this.id=a;this.plist=b}function a(a,b){var d={before:null,after:null,start:null,end:null};"tb"===b.bpd?(d.before=a.top,d.after=a.bottom,"lr"===b.ipd?(d.start=a.left,d.end=a.right):(d.start=a.right,d.end=a.left)):"lr"===b.bpd?(d.before=a.left,d.after=a.right,d.start=a.top,d.end=a.bottom):"rl"===b.bpd&&(d.before=a.right,d.after=a.left,d.start=a.top,d.end=a.bottom);return d}
function h(b,c,f,k){if("rt"!==c.localName&&"rtc"!==c.localName)if(k=c.style.backgroundColor||k,0===c.childElementCount)if("span"===c.localName||"rb"===c.localName){var d=c.getBoundingClientRect();b=a(d,b);if(!(d=0===f.length)){d=b.before;var m=b.after,t=f[f.length-1].before,n=f[f.length-1].after;d=!(m<n&&d>t||n<=m&&t>=d)}d?f.push({before:b.before,after:b.after,start:b.start,end:b.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1}):(d=Math.sign(b.after-b.before),m=Math.sign(b.end-
b.start),0>d*(b.before-f[f.length-1].before)&&(f[f.length-1].before=b.before),0<d*(b.after-f[f.length-1].after)&&(f[f.length-1].after=b.after),0>m*(b.start-f[f.length-1].start)&&(f[f.length-1].start=b.start,f[f.length-1].start_elem=f[f.length-1].elements.length),0<m*(b.end-f[f.length-1].end)&&(f[f.length-1].end=b.end,f[f.length-1].end_elem=f[f.length-1].elements.length));f[f.length-1].text+=c.textContent;f[f.length-1].elements.push({node:c,bgcolor:k,before:b.before,after:b.after})}else"br"===c.localName&&
0!==f.length&&(f[f.length-1].br=!0);else for(c=c.firstChild;c;)c.nodeType===Node.ELEMENT_NODE&&(h(b,c,f,k),"ruby"===c.localName||"rtc"===c.localName?0<f.length&&f[f.length-1].rbc.push(c):"span"===c.localName&&c.style[J]&&"none"!==c.style[J]&&0<f.length&&f[f.length-1].te.push(c)),c=c.nextSibling}function z(a,b,c,h){"none"!==h.style&&(b.style[J]="auto"===h.style?"filled":h.style+" "+h.symbol,"before"===h.position||"after"===h.position)&&(b.style[B]="tb"===a.bpd?"before"===h.position?"left over":"left under":
"rl"===a.bpd?"before"===h.position?"right under":"left under":"before"===h.position?"left under":"right under")}function k(a,b){this.qname=a;this.map=b}c.render=function(a,b,c,h,k,m,l,p,z){h=h||b.clientHeight;var d=k||b.clientWidth;null!==a.aspectRatio&&(k=h*a.aspectRatio,k>d?h=Math.round(d/a.aspectRatio):d=k);k=document.createElement("div");k.style.position="relative";k.style.width=d+"px";k.style.height=h+"px";k.style.margin="auto";k.style.top=0;k.style.bottom=0;k.style.left=0;k.style.right=0;k.style.zIndex=
0;c={h:h,w:d,regionH:null,regionW:null,imgResolver:c,displayForcedOnlyMode:m||!1,isd:a,errorHandler:l,previousISDState:p,enableRollUp:z||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};b.appendChild(k);if("contents"in a)for(b=0;b<a.contents.length;b++)n(c,k,a.contents[b],a);return c.currentISDState};var E=[new k("http://www.w3.org/ns/ttml#styling backgroundColor",function(a,b,c,h){0!==h[3]&&(b.style.backgroundColor="rgba("+h[0].toString()+
","+h[1].toString()+","+h[2].toString()+","+(h[3]/255).toString()+")")}),new k("http://www.w3.org/ns/ttml#styling color",function(a,b,c,h){b.style.color="rgba("+h[0].toString()+","+h[1].toString()+","+h[2].toString()+","+(h[3]/255).toString()+")"}),new k("http://www.w3.org/ns/ttml#styling direction",function(a,b,c,h){b.style.direction=h}),new k("http://www.w3.org/ns/ttml#styling display",function(a,b,c,h){}),new k("http://www.w3.org/ns/ttml#styling displayAlign",function(a,b,c,h){b.style.display=
"flex";b.style.flexDirection="column";"before"===h?b.style.justifyContent="flex-start":"center"===h?b.style.justifyContent="center":"after"===h&&(b.style.justifyContent="flex-end")}),new k("http://www.w3.org/ns/ttml#styling extent",function(a,b,c,h){a.regionH=h.h.toUsedLength(a.w,a.h);a.regionW=h.w.toUsedLength(a.w,a.h);var d=h=0;if(c=c.styleAttrs["http://www.w3.org/ns/ttml#styling padding"])h=c[0].toUsedLength(a.w,a.h)+c[2].toUsedLength(a.w,a.h),d=c[1].toUsedLength(a.w,a.h)+c[3].toUsedLength(a.w,
a.h);b.style.height=a.regionH-h+"px";b.style.width=a.regionW-d+"px"}),new k("http://www.w3.org/ns/ttml#styling fontFamily",function(a,b,c,h){a=[];for(c=0;c<h.length;c++)"monospaceSerif"===h[c]?(a.push("Courier New"),a.push('"Liberation Mono"'),a.push("Courier"),a.push("monospace")):"proportionalSansSerif"===h[c]?(a.push("Arial"),a.push("Helvetica"),a.push('"Liberation Sans"'),a.push("sans-serif")):"monospace"===h[c]?a.push("monospace"):"sansSerif"===h[c]?a.push("sans-serif"):"serif"===h[c]?a.push("serif"):
"monospaceSansSerif"===h[c]?(a.push("Consolas"),a.push("monospace")):"proportionalSerif"===h[c]?a.push("serif"):a.push(h[c]);if(0<a.length){h=[a[0]];for(c=1;c<a.length;c++)-1==h.indexOf(a[c])&&h.push(a[c]);a=h}b.style.fontFamily=a.join(",")}),new k("http://www.w3.org/ns/ttml#styling shear",function(a,b,c,h){0!==h&&(c=-.9*h,b.style.transform="tb"===a.bpd?"skewX("+c+"deg)":"skewY("+c+"deg)")}),new k("http://www.w3.org/ns/ttml#styling fontSize",function(a,b,c,h){b.style.fontSize=h.toUsedLength(a.w,a.h)+
"px"}),new k("http://www.w3.org/ns/ttml#styling fontStyle",function(a,b,c,h){b.style.fontStyle=h}),new k("http://www.w3.org/ns/ttml#styling fontWeight",function(a,b,c,h){b.style.fontWeight=h}),new k("http://www.w3.org/ns/ttml#styling lineHeight",function(a,b,c,h){b.style.lineHeight="normal"===h?"normal":h.toUsedLength(a.w,a.h)+"px"}),new k("http://www.w3.org/ns/ttml#styling opacity",function(a,b,c,h){b.style.opacity=h}),new k("http://www.w3.org/ns/ttml#styling origin",function(a,b,c,h){b.style.top=
h.h.toUsedLength(a.w,a.h)+"px";b.style.left=h.w.toUsedLength(a.w,a.h)+"px"}),new k("http://www.w3.org/ns/ttml#styling overflow",function(a,b,c,h){b.style.overflow=h}),new k("http://www.w3.org/ns/ttml#styling padding",function(a,b,c,h){c=[];c[0]=h[0].toUsedLength(a.w,a.h)+"px";c[1]=h[3].toUsedLength(a.w,a.h)+"px";c[2]=h[2].toUsedLength(a.w,a.h)+"px";c[3]=h[1].toUsedLength(a.w,a.h)+"px";b.style.padding=c.join(" ")}),new k("http://www.w3.org/ns/ttml#styling position",function(a,b,c,h){b.style.top=h.h.toUsedLength(a.w,
a.h)+"px";b.style.left=h.w.toUsedLength(a.w,a.h)+"px"}),new k("http://www.w3.org/ns/ttml#styling rubyAlign",function(a,b,c,h){b.style.rubyAlign="spaceAround"===h?"space-around":"center"}),new k("http://www.w3.org/ns/ttml#styling rubyPosition",function(a,b,c,h){if("before"===h||"after"===h)b.parentElement.style[F]=x?h:"tb"===a.bpd?"before"===h?"over":"under":"rl"===a.bpd?"before"===h?"over":"under":"before"===h?"under":"over"}),new k("http://www.w3.org/ns/ttml#styling showBackground",null),new k("http://www.w3.org/ns/ttml#styling textAlign",
function(a,b,c,h){b.style.textAlign="start"===h?"rl"===a.ipd?"right":"left":"end"===h?"rl"===a.ipd?"left":"right":h}),new k("http://www.w3.org/ns/ttml#styling textDecoration",function(a,b,c,h){b.style.textDecoration=h.join(" ").replace("lineThrough","line-through")}),new k("http://www.w3.org/ns/ttml#styling textOutline",function(a,b,c,h){}),new k("http://www.w3.org/ns/ttml#styling textShadow",function(a,b,c,h){var d=c.styleAttrs[m.byName.textOutline.qname];if("none"===h&&"none"===d)b.style.textShadow=
"";else{c=[];"none"!==d&&(d="rgba("+d.color[0].toString()+","+d.color[1].toString()+","+d.color[2].toString()+","+(d.color[3]/255).toString()+")",c.push("1px 1px 1px "+d),c.push("-1px 1px 1px "+d),c.push("1px -1px 1px "+d),c.push("-1px -1px 1px "+d));if("none"!==h)for(d=0;d<h.length;d++)c.push(h[d].x_off.toUsedLength(a.w,a.h)+"px "+h[d].y_off.toUsedLength(a.w,a.h)+"px "+h[d].b_radius.toUsedLength(a.w,a.h)+"px rgba("+h[d].color[0].toString()+","+h[d].color[1].toString()+","+h[d].color[2].toString()+
","+(h[d].color[3]/255).toString()+")");b.style.textShadow=c.join(",")}}),new k("http://www.w3.org/ns/ttml#styling textCombine",function(a,b,c,h){b.style.textCombineUpright=h}),new k("http://www.w3.org/ns/ttml#styling textEmphasis",function(a,b,c,h){}),new k("http://www.w3.org/ns/ttml#styling unicodeBidi",function(a,b,c,h){b.style.unicodeBidi="bidiOverride"===h?"bidi-override":h}),new k("http://www.w3.org/ns/ttml#styling visibility",function(a,b,c,h){b.style.visibility=h}),new k("http://www.w3.org/ns/ttml#styling wrapOption",
function(a,b,c,h){b.style.whiteSpace="wrap"===h?"preserve"===c.space?"pre-wrap":"normal":"preserve"===c.space?"pre":"noWrap"}),new k("http://www.w3.org/ns/ttml#styling writingMode",function(a,b,c,h){if("lrtb"===h||"lr"===h)b.style.writingMode="horizontal-tb";else if("rltb"===h||"rl"===h)b.style.writingMode="horizontal-tb";else if("tblr"===h)b.style.writingMode="vertical-lr";else if("tbrl"===h||"tb"===h)b.style.writingMode="vertical-rl"}),new k("http://www.w3.org/ns/ttml#styling zIndex",function(a,
b,c,h){b.style.zIndex=h}),new k("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(a,b,c,h){a.displayForcedOnlyMode&&!1===h&&(b.style.visibility="hidden")})];for(c=0;c<E.length;c++);var x="webkitRubyPosition"in window.getComputedStyle(document.documentElement),F=x?"webkitRubyPosition":"rubyPosition",J="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",B="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?
"webkitTextEmphasisPosition":"textEmphasisPosition"})("undefined"===typeof l?this.imscHTML={}:l,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscStyles?c("./styles"):imscStyles,"undefined"===typeof imscUtils?c("./utils"):imscUtils)},{"./names":35,"./styles":36,"./utils":37}],33:[function(c,u,l){(function(c,b,m,l){function n(b,c,z,v,d,w,f,t,E){if(c<f.begin||c>=f.end)return null;w="regionID"in f&&""!==f.regionID?f.regionID:w;if(null!==d&&w!==z.id&&(!("contents"in f)||"contents"in
f&&0===f.contents.length||""!==w))return null;var q=new k(f);if("sets"in f)for(var x=0;x<f.sets.length;x++)c<f.sets[x].begin||c>=f.sets[x].end||(q.styleAttrs[f.sets[x].qname]=f.sets[x].value);x={};for(var B in q.styleAttrs)if(q.styleAttrs.hasOwnProperty(B)&&(x[B]=!0,"region"===q.kind&&B===m.byName.writingMode.qname&&!(m.byName.direction.qname in q.styleAttrs))){var y=q.styleAttrs[B];if("lrtb"===y||"lr"===y)q.styleAttrs[m.byName.direction.qname]="ltr";else if("rltb"===y||"rl"===y)q.styleAttrs[m.byName.direction.qname]=
"rtl"}if(null!==d)for(B=0;B<m.all.length;B++)if(y=m.all[B],y.qname===m.byName.textDecoration.qname){var A=d.styleAttrs[y.qname],F=q.styleAttrs[y.qname],C=[];void 0===F?C=A:-1===F.indexOf("none")?((-1===F.indexOf("noUnderline")&&-1!==A.indexOf("underline")||-1!==F.indexOf("underline"))&&C.push("underline"),(-1===F.indexOf("noLineThrough")&&-1!==A.indexOf("lineThrough")||-1!==F.indexOf("lineThrough"))&&C.push("lineThrough"),(-1===F.indexOf("noOverline")&&-1!==A.indexOf("overline")||-1!==F.indexOf("overline"))&&
C.push("overline")):C.push("none");q.styleAttrs[y.qname]=C}else y.qname!==m.byName.fontSize.qname||y.qname in q.styleAttrs||"span"!==q.kind||"textContainer"!==q.styleAttrs[m.byName.ruby.qname]?y.qname!==m.byName.fontSize.qname||y.qname in q.styleAttrs||"span"!==q.kind||"text"!==q.styleAttrs[m.byName.ruby.qname]?y.inherit&&y.qname in d.styleAttrs&&!(y.qname in q.styleAttrs)&&(q.styleAttrs[y.qname]=d.styleAttrs[y.qname]):(A=d.styleAttrs[m.byName.fontSize.qname],q.styleAttrs[y.qname]="textContainer"===
d.styleAttrs[m.byName.ruby.qname]?A:new l.ComputedLength(.5*A.rw,.5*A.rh)):(A=d.styleAttrs[m.byName.fontSize.qname],q.styleAttrs[y.qname]=new l.ComputedLength(.5*A.rw,.5*A.rh));for(B=0;B<m.all.length;B++)if(y=m.all[B],!(y.qname in q.styleAttrs||y.qname===m.byName.position.qname&&m.byName.origin.qname in q.styleAttrs||y.qname===m.byName.origin.qname&&m.byName.position.qname in q.styleAttrs)&&(A=b.head.styling.initials[y.qname]||y.initial,null!==A&&("region"===q.kind||!1===y.inherit&&null!==A)))if(A=
y.parse(A),null!==A)q.styleAttrs[y.qname]=A,x[y.qname]=!0;else if(y="Invalid initial value for '"+y.qname+"' on element '"+q.kind,t&&t.error&&t.error(y))throw y;for(B=0;B<m.all.length;B++)if(y=m.all[B],y.qname in x&&null!==y.compute)if(A=y.compute(b,d,q,q.styleAttrs[y.qname],E),null!==A)q.styleAttrs[y.qname]=A;else if(q.styleAttrs[y.qname]=y.compute(b,d,q,y.parse(y.initial),E),y="Style '"+y.qname+"' on element '"+q.kind+"' cannot be computed",t&&t.error&&t.error(y))throw y;if("none"===q.styleAttrs[m.byName.display.qname])return null;
x=null;null===d?x=null===v?[]:[v]:"contents"in f&&(x=f.contents);for(d=0;null!==x&&d<x.length;d++)f=n(b,c,z,v,q,w,x[d],t,E),null!==f&&q.contents.push(f.element);for(var D in q.styleAttrs)q.styleAttrs.hasOwnProperty(D)&&(b=!1,"span"===q.kind&&(c=q.styleAttrs[m.byName.ruby.qname],(b=("container"===c||"textContainer"===c||"baseContainer"===c)&&-1!==u.indexOf(D))||(b="container"!==c&&D===m.byName.rubyAlign.qname),b||(b=!("textContainer"===c||"text"===c)&&D===m.byName.rubyPosition.qname)),b||(c=m.byQName[D],
"applies"in c&&(b=-1===c.applies.indexOf(q.kind))),b&&delete q.styleAttrs[D]);D=q.styleAttrs[m.byName.ruby.qname];if("p"===q.kind||"span"===q.kind&&("textContainer"===D||"text"===D))D=[],a(q,D),p(D),h(q);return"div"===q.kind&&m.byName.backgroundImage.qname in q.styleAttrs||"br"===q.kind||"image"===q.kind||"contents"in q&&0<q.contents.length||"span"===q.kind&&null!==q.text||"region"===q.kind&&"always"===q.styleAttrs[m.byName.showBackground.qname]?{region_id:w,element:q}:null}function p(a){function b(a){return"br"===
a.kind||/[\r\n\t ]$/.test(a.text)}function c(a){return"br"===a.kind||"preserve"===a.space&&/^[\r\n]/.test(a.text)}for(var h,d=0;d<a.length;)if(h=a[d],"br"===h.kind||"preserve"===h.space)d++;else{var k=h.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(k)&&(0===d||b(a[d-1]))&&(k=k.substring(1));h.text=k;0===k.length?a.splice(d,1):d++}for(d=0;d<a.length;d++)h=a[d],"br"===h.kind||"preserve"===h.space?d++:/[ ]$/.test(h.text)&&(d===a.length-1||c(a[d+1]))&&(h.text=h.text.slice(0,-1))}function a(b,c){if("contents"in
b)for(var h=0;h<b.contents.length;h++){var k=b.contents[h],d=k.styleAttrs[m.byName.ruby.qname];if("span"!==k.kind||"textContainer"!==d&&"text"!==d)"contents"in k?a(k,c):("span"===k.kind&&0!==k.text.length||"br"===k.kind)&&c.push(k)}}function h(a){if("br"===a.kind)return!1;if("text"in a)return 0===a.text.length;if("contents"in a){for(var b=a.contents.length;b--;)h(a.contents[b])&&a.contents.splice(b,1);return 0===a.contents.length}}function z(a){this.contents=[];this.aspectRatio=a.aspectRatio;this.lang=
a.lang}function k(a){this.kind=a.kind||"region";this.lang=a.lang;a.id&&(this.id=a.id);this.styleAttrs={};for(var b in a.styleAttrs)a.styleAttrs.hasOwnProperty(b)&&(this.styleAttrs[b]=a.styleAttrs[b]);"src"in a&&(this.src=a.src);"type"in a&&(this.type=a.type);if("text"in a)this.text=a.text;else if("region"===this.kind||"contents"in a)this.contents=[];"space"in a&&(this.space=a.space)}c.generateISD=function(a,b,c){function h(a,b){function c(b){return!(a<b.begin||a>=b.end)}if(b.contents){var d={},e;
for(e in b)b.hasOwnProperty(e)&&(d[e]=b[e]);d.contents=[];b.contents.filter(c).forEach(function(b){b=h(a,b);b.regionID&&(l[b.regionID]=!0);null!==b&&d.contents.push(b)});return d}return b}var d=new z(a),k={},f={},l={};f=a.head.styling.initials[m.byName.showBackground.qname];var p=a.head.styling.initials[m.byName.backgroundColor.qname];for(E in a.head.layout.regions)if(a.head.layout.regions.hasOwnProperty(E)){var q=a.head.layout.regions[E],x=q.styleAttrs[m.byName.showBackground.qname]||f,u=q.styleAttrs[m.byName.backgroundColor.qname]||
p;l[q.id]=("always"===x||void 0===x)&&void 0!==u&&!(b<q.begin||b>=q.end)}a.body&&a.body.regionID&&(l[a.body.regionID]=!0);f=null!==a.body?h(b,a.body):null;void 0!==l[""]&&(l[""]=!0);for(var v in l)if(l[v]){var E=n(a,b,a.head.layout.regions[v],f,null,"",a.head.layout.regions[v],c,k);null!==E&&d.contents.push(E.element)}return d};var u=[m.byName.color.qname,m.byName.textCombine.qname,m.byName.textDecoration.qname,m.byName.textEmphasis.qname,m.byName.textOutline.qname,m.byName.textShadow.qname]})("undefined"===
typeof l?this.imscISD={}:l,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscStyles?c("./styles"):imscStyles,"undefined"===typeof imscUtils?c("./utils"):imscUtils)},{"./names":35,"./styles":36,"./utils":37}],34:[function(c,u,l){l.generateISD=c("./isd").generateISD;l.fromXML=c("./doc").fromXML;l.renderHTML=c("./html").render},{"./doc":31,"./html":32,"./isd":33}],35:[function(c,u,l){c="undefined"===typeof l?this.imscNames={}:l;c.ns_tt="http://www.w3.org/ns/ttml";c.ns_tts=
"http://www.w3.org/ns/ttml#styling";c.ns_ttp="http://www.w3.org/ns/ttml#parameter";c.ns_xml="http://www.w3.org/XML/1998/namespace";c.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling";c.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter";c.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt";c.ns_ebutts="urn:ebu:tt:style"},{}],36:[function(c,u,l){(function(c,b,m){function l(a,b,c,k,m,l,n,p){this.name=b;this.ns=a;this.qname=a+" "+b;this.inherit=m;this.animatable=l;this.initial=
c;this.applies=k;this.parse=n;this.compute=p}c.all=[new l(b.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,m.parseColor,null),new l(b.ns_tts,"color","white",["span"],!0,!0,m.parseColor,null),new l(b.ns_tts,"direction","ltr",["p","span"],!0,!0,function(a){return a},null),new l(b.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(a){return a},null),new l(b.ns_tts,"displayAlign","before",["region"],!1,!0,function(a){return a},null),new l(b.ns_tts,
"extent","auto",["tt","region"],!1,!0,function(a){if("auto"===a)return a;var b=a.split(" ");if(2!==b.length)return null;a=m.parseLength(b[0]);return(b=m.parseLength(b[1]))&&a?{h:b,w:a}:null},function(a,b,c,k,l){if("auto"===k)b=new m.ComputedLength(0,1);else if(b=m.toComputedLength(k.h.value,k.h.unit,null,a.dimensions.h,null,a.pxLength.h),null===b)return null;if("auto"===k)a=new m.ComputedLength(1,0);else if(a=m.toComputedLength(k.w.value,k.w.unit,null,a.dimensions.w,null,a.pxLength.w),null===a)return null;
return{h:b,w:a}}),new l(b.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(a){a=a.split(",");for(var b=[],c=0;c<a.length;c++)"'"!==a[c].charAt(0)&&'"'!==a[c].charAt(0)?"default"===a[c]?b.push("monospaceSerif"):b.push(a[c]):b.push(a[c]);return b},null),new l(b.ns_tts,"shear","0%",["p"],!0,!0,m.parseLength,function(a,b,c,k){if("%"===k.unit)a=100<Math.abs(k.value)?100*Math.sign(k.value):k.value;else return null;return a}),new l(b.ns_tts,"fontSize","1c",["span","p"],!0,!0,m.parseLength,function(a,
b,l,k,n){return m.toComputedLength(k.value,k.unit,null!==b?b.styleAttrs[c.byName.fontSize.qname]:a.cellLength.h,null!==b?b.styleAttrs[c.byName.fontSize.qname]:a.cellLength.h,a.cellLength.h,a.pxLength.h)}),new l(b.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(a){return a},null),new l(b.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(a){return a},null),new l(b.ns_tts,"lineHeight","normal",["p"],!0,!0,function(a){return"normal"===a?a:m.parseLength(a)},function(a,b,l,k,n){if("normal"===
k)a=k;else if(a=m.toComputedLength(k.value,k.unit,l.styleAttrs[c.byName.fontSize.qname],l.styleAttrs[c.byName.fontSize.qname],a.cellLength.h,a.pxLength.h),null===a)return null;return a}),new l(b.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new l(b.ns_tts,"origin","auto",["region"],!1,!0,function(a){if("auto"===a)return a;var b=a.split(" ");if(2!==b.length)return null;a=m.parseLength(b[0]);return(b=m.parseLength(b[1]))&&a?{h:b,w:a}:null},function(a,b,c,k,l){if("auto"===k)b=new m.ComputedLength(0,
0);else if(b=m.toComputedLength(k.h.value,k.h.unit,null,a.dimensions.h,null,a.pxLength.h),null===b)return null;if("auto"===k)a=new m.ComputedLength(0,0);else if(a=m.toComputedLength(k.w.value,k.w.unit,null,a.dimensions.w,null,a.pxLength.w),null===a)return null;return{h:b,w:a}}),new l(b.ns_tts,"overflow","hidden",["region"],!1,!0,function(a){return a},null),new l(b.ns_tts,"padding","0px",["region"],!1,!0,function(a){a=a.split(" ");if(4<a.length)return null;for(var b=[],c=0;c<a.length;c++){var k=m.parseLength(a[c]);
if(!k)return null;b.push(k)}return b},function(a,b,l,k,n){if(1===k.length)b=[k[0],k[0],k[0],k[0]];else if(2===k.length)b=[k[0],k[1],k[0],k[1]];else if(3===k.length)b=[k[0],k[1],k[2],k[1]];else if(4===k.length)b=[k[0],k[1],k[2],k[3]];else return null;k=l.styleAttrs[c.byName.writingMode.qname];if("lrtb"===k||"lr"===k)b=[b[0],b[3],b[2],b[1]];else if("rltb"===k||"rl"===k)b=[b[0],b[1],b[2],b[3]];else if("tblr"===k)b=[b[3],b[0],b[1],b[2]];else if("tbrl"===k||"tb"===k)b=[b[3],b[2],b[1],b[0]];else return null;
k=[];for(n=0;n<b.length;n++)if(0===b[n].value)k[n]=new m.ComputedLength(0,0);else if(k[n]=m.toComputedLength(b[n].value,b[n].unit,l.styleAttrs[c.byName.fontSize.qname],0===n||2===n?l.styleAttrs[c.byName.extent.qname].h:l.styleAttrs[c.byName.extent.qname].w,0===n||2===n?a.cellLength.h:a.cellLength.w,0===n||2===n?a.pxLength.h:a.pxLength.w),null===k[n])return null;return k}),new l(b.ns_tts,"position","top left",["region"],!1,!0,function(a){return m.parsePosition(a)},function(a,b,l,k){b=m.toComputedLength(k.v.offset.value,
k.v.offset.unit,null,new m.ComputedLength(-l.styleAttrs[c.byName.extent.qname].h.rw,a.dimensions.h.rh-l.styleAttrs[c.byName.extent.qname].h.rh),null,a.pxLength.h);if(null===b)return null;"bottom"===k.v.edge&&(b=new m.ComputedLength(-b.rw-l.styleAttrs[c.byName.extent.qname].h.rw,a.dimensions.h.rh-b.rh-l.styleAttrs[c.byName.extent.qname].h.rh));var h=m.toComputedLength(k.h.offset.value,k.h.offset.unit,null,new m.ComputedLength(a.dimensions.w.rw-l.styleAttrs[c.byName.extent.qname].w.rw,-l.styleAttrs[c.byName.extent.qname].w.rh),
null,a.pxLength.w);if(null===b)return null;"right"===k.h.edge&&(h=new m.ComputedLength(a.dimensions.w.rw-h.rw-l.styleAttrs[c.byName.extent.qname].w.rw,-h.rh-l.styleAttrs[c.byName.extent.qname].w.rh));return{h:b,w:h}}),new l(b.ns_tts,"ruby","none",["span"],!1,!0,function(a){return a},null),new l(b.ns_tts,"rubyAlign","center",["span"],!0,!0,function(a){return"center"!==a&&"spaceAround"!==a?null:a},null),new l(b.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(a){return a},null),new l(b.ns_tts,
"rubyReserve","none",["p"],!0,!0,function(a){var b=a.split(" ");a=[null,null];if(0===b.length||2<b.length||"none"!==b[0]&&"both"!==b[0]&&"after"!==b[0]&&"before"!==b[0]&&"outside"!==b[0])return null;a[0]=b[0];if(2===b.length&&"none"!==b[0])if(b=m.parseLength(b[1]))a[1]=b;else return null;return a},function(a,b,l,k,n){if("none"===k[0])return k;a=null===k[1]?new m.ComputedLength(.5*l.styleAttrs[c.byName.fontSize.qname].rw,.5*l.styleAttrs[c.byName.fontSize.qname].rh):m.toComputedLength(k[1].value,k[1].unit,
l.styleAttrs[c.byName.fontSize.qname],l.styleAttrs[c.byName.fontSize.qname],a.cellLength.h,a.pxLength.h);return null===a?null:[k[0],a]}),new l(b.ns_tts,"showBackground","always",["region"],!1,!0,function(a){return a},null),new l(b.ns_tts,"textAlign","start",["p"],!0,!0,function(a){return a},function(a,b,c,k,l){return"left"===k?"start":"right"===k?"end":k}),new l(b.ns_tts,"textCombine","none",["span"],!0,!0,function(a){return"none"===a||"all"===a?a:null},null),new l(b.ns_tts,"textDecoration","none",
["span"],!0,!0,function(a){return a.split(" ")},null),new l(b.ns_tts,"textEmphasis","none",["span"],!0,!0,function(a){a=a.split(" ");for(var b={style:null,symbol:null,color:null,position:null},c=0;c<a.length;c++)if("none"===a[c]||"auto"===a[c])b.style=a[c];else if("filled"===a[c]||"open"===a[c])b.style=a[c];else if("circle"===a[c]||"dot"===a[c]||"sesame"===a[c])b.symbol=a[c];else if("current"===a[c])b.color=a[c];else if("outside"===a[c]||"before"===a[c]||"after"===a[c])b.position=a[c];else if(b.color=
m.parseColor(a[c]),null===b.color)return null;null==b.style&&null==b.symbol?b.style="auto":(b.symbol=b.symbol||"circle",b.style=b.style||"filled");b.position=b.position||"outside";b.color=b.color||"current";return b},null),new l(b.ns_tts,"textOutline","none",["span"],!0,!0,function(a){if("none"===a)return a;var b={};a=a.split(" ");if(0===a.length||2<a.length)return null;var c=m.parseColor(a[0]);b.color=c;null!==c&&a.shift();if(1!==a.length)return null;a=m.parseLength(a[0]);if(!a)return null;b.thickness=
a;return b},function(a,b,l,k,n){if("none"===k)return k;b={};b.color=null===k.color?l.styleAttrs[c.byName.color.qname]:k.color;b.thickness=m.toComputedLength(k.thickness.value,k.thickness.unit,l.styleAttrs[c.byName.fontSize.qname],l.styleAttrs[c.byName.fontSize.qname],a.cellLength.h,a.pxLength.h);return null===b.thickness?null:b}),new l(b.ns_tts,"textShadow","none",["span"],!0,!0,m.parseTextShadow,function(a,b,l,k){if("none"===k)return k;b=[];for(var h=0;h<k.length;h++){var n={};n.x_off=m.toComputedLength(k[h][0].value,
k[h][0].unit,null,l.styleAttrs[c.byName.fontSize.qname],null,a.pxLength.w);if(null===n.x_off)return null;n.y_off=m.toComputedLength(k[h][1].value,k[h][1].unit,null,l.styleAttrs[c.byName.fontSize.qname],null,a.pxLength.h);if(null===n.y_off)return null;if(null===k[h][2])n.b_radius=0;else if(n.b_radius=m.toComputedLength(k[h][2].value,k[h][2].unit,null,l.styleAttrs[c.byName.fontSize.qname],null,a.pxLength.h),null===n.b_radius)return null;n.color=null===k[h][3]?l.styleAttrs[c.byName.color.qname]:k[h][3];
b.push(n)}return b}),new l(b.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(a){return a},null),new l(b.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(a){return a},null),new l(b.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(a){return a},null),new l(b.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(a){return a},null),new l(b.ns_tts,"zIndex","auto",["region"],!1,!0,function(a){"auto"!==a&&(a=parseInt(a),isNaN(a)&&(a=null));return a},null),new l(b.ns_ebutts,
"linePadding","0c",["p"],!0,!1,m.parseLength,function(a,b,c,k,l){return m.toComputedLength(k.value,k.unit,null,null,a.cellLength.w,null)}),new l(b.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(a){return a},null),new l(b.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(a){return a},null),new l(b.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(a){return"true"===a?!0:!1},null),new l(b.ns_itts,"fillLineGap","false",["p"],!0,!0,function(a){return"true"===
a?!0:!1},null)];c.byQName={};for(var n in c.all)c.byQName[c.all[n].qname]=c.all[n];c.byName={};for(var u in c.all)c.byName[c.all[u].name]=c.all[u]})("undefined"===typeof l?this.imscStyles={}:l,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscUtils?c("./utils"):imscUtils)},{"./names":35,"./utils":37}],37:[function(c,u,l){(function(c){var b=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,l=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,n=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,
u={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};c.parseColor=function(a){var c,m=null,k=u[a.toLowerCase()];void 0!==k?m=k:null!==(c=b.exec(a))?
m=[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16),void 0!==c[4]?parseInt(c[4],16):255]:null!==(c=l.exec(a))?m=[parseInt(c[1]),parseInt(c[2]),parseInt(c[3]),255]:null!==(c=n.exec(a))&&(m=[parseInt(c[1]),parseInt(c[2]),parseInt(c[3]),parseInt(c[4])]);return m};var v=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;c.parseLength=function(a){var b,c=null;null!==(b=v.exec(a))&&(c={value:parseFloat(b[1]),unit:b[2]});return c};c.parseTextShadow=function(a){a=a.match(/([^\(,\)]|\([^\)]+\))+/g);for(var b=
[],l=0;l<a.length;l++){var k=a[l].split(" ");if(1===k.length&&"none"===k[0])return"none";if(1<k.length&&5>k.length){var m=[null,null,null,null],n=c.parseLength(k.shift());if(null===n)return null;m[0]=n;n=c.parseLength(k.shift());if(null===n)return null;m[1]=n;if(0!==k.length&&(n=c.parseLength(k[0]),null!==n&&(m[2]=n,k.shift()),0!==k.length)){k=c.parseColor(k[0]);if(null===k)return null;m[3]=k}b.push(m)}}return b};c.parsePosition=function(a){a=a.split(" ");var b=function(a){return"center"===a||"left"===
a||"top"===a||"bottom"===a||"right"===a};if(4<a.length)return null;for(var l=0;l<a.length;l++)if(!b(a[l])){var k=c.parseLength(a[l]);if(null===k)return null;a[l]=k}l={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}};for(k=0;k<a.length;){var m=a[k++];if(b(m)){var n={value:0,unit:"%"};2!==a.length&&k<a.length&&!b(a[k])&&(n=a[k++]);"right"===m?(l.h.edge=m,l.h.offset=n):"bottom"===m?(l.v.edge=m,l.v.offset=n):"left"===m?l.h.offset=n:"top"===m&&(l.v.offset=n)}else if(1===
a.length||2===a.length)1===k?l.h.offset=m:l.v.offset=m;else return null}return l};c.ComputedLength=function(a,b){this.rw=a;this.rh=b};c.ComputedLength.prototype.toUsedLength=function(a,b){return a*this.rw+b*this.rh};c.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===this.rh};c.toComputedLength=function(a,b,l,k,m,n){return"%"===b&&k?new c.ComputedLength(k.rw*a/100,k.rh*a/100):"em"===b&&l?new c.ComputedLength(l.rw*a,l.rh*a):"c"===b&&m?new c.ComputedLength(a*m.rw,a*m.rh):"px"===b&&
n?new c.ComputedLength(a*n.rw,a*n.rh):"rh"===b?new c.ComputedLength(0,a/100):"rw"===b?new c.ComputedLength(a/100,0):null}})("undefined"===typeof l?this.imscUtils={}:l)},{}]},{},[34])(34)});
