
<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <title>Rádio AD Belém</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="theme-color" content="#000" />
        <meta name="apple-mobile-web-app-status-bar-style" content="#000" />
        <meta name="msapplication-navbutton-color" content="#7ac525" />
        <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
        <script src="https://cdn.plyr.io/3.6.12/plyr.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdn.plyr.io/3.6.12/plyr.css" /> 
<style>



  

  
    audio::-webkit-media-controls-panel {background-color: rgb(221, 209, 209); }
  </style>

        <link rel="stylesheet" type="text/css" href="style.css">
    </head>
    <body>


<div id="player"><center>
    <h3>Rádio AD Belém</h3></center>
	<center>
        <img  src="https://1.bp.blogspot.com/-yyk5O87kvi8/YT5xdhhSIPI/AAAAAAAABEQ/TpxvKIRpaI0FU_8TPGdb43cBvJByURiUACLcBGAsYHQ/s200/adbelem.png" width="300px" />
	</center><center>
    <canvas id='canvas' width="300px"  heigth="250px" ></canvas>
    <section class="tape">

        <audio src="https://stm1.srvif.com:6672/;?1614959595633" crossorigin="anonymous" ></audio>

<!-- 			type="audio/mpeg" -->

        <button data-playing="false" class="tape-controls-play" role="switch" aria-checked="false">
            <span>Play/Pause</span>
        </button>
    </section>
    </center><center>
        <audio  id="audio" src="./music/CoisinhaEstupida.mp3" crossorigin="anonymous"  controls  autoplay  preload="auto">audio element not supported</audio>
</center><center>
<ul id="playlist">
  <li class="current-song"> <a href="./music/CoisinhaEstupida.mp3">1- Sábado</a></li>
  <li><a href="./music/DoceEngano.mp3">2- Doce engano</a></li>
  <li><a href="./music/QuemNegaALuz.mp3">3- Coisinha estúpida</a></li>
  <li><a href="./music/Sabado.mp3">Sábado</a>
  </li></div>

</ul></center>
        <script src="main.js"></script>


        <script type="text/javascript">
          console.clear();
          playButton.addEventListener('click', function() {
  if(!audioCtx) {
		init();
	}

	// check if context is in suspended state (autoplay policy)
	if (audioCtx.state === 'suspended') {
		audioCtx.resume();
	}

	if (this.dataset.playing === 'false') {
		audioElement.play();
		this.dataset.playing = 'true';
	// if track is playing pause it
	} else if (this.dataset.playing === 'true') {
		audioElement.pause();
		this.dataset.playing = 'false';
	}
    let state = this.getAttribute('aria-checked') === "true" ? true : false;
	this.setAttribute( 'aria-checked', state ? "false" : "true" );

}, false);

// if track ends
audioElement.addEventListener('ended', () => {
	playButton.dataset.playing = 'false';
	playButton.setAttribute( "aria-checked", "false" );
}, false);

          function audio(){
                      var currentSong = 0;
                      $("#audio")[0].src = $("#playlist li a")[0];
                      $("#audio")[0].play();
                      $("#playlist li a").click(function(e){
                         e.preventDefault(); 
                         $("#audio")[0].src = this;
                         $("#audio")[0].play();
                         $("#playlist li").removeClass("current-song");
                          currentSong = $(this).parent().index();
                          $(this).parent().addClass("current-song");
                      });
                      
                      $("#audio")[0].addEventListener("ended", function(){
                         currentSong++;
                          if(currentSong == $("#playlist li a").length)
                              currentSong = 0;
                          $("#playlist li").removeClass("current-song");
                          $("#playlist li:eq("+currentSong+")").addClass("current-song");
                          $("#audio")[0].src = $("#playlist li a")[currentSong].href;
                          $("#audio")[0].play();
                      });
                  }
          
          
          
                </script>
                      <script>
                        // loads the audio player
                        audio();
                    </script>
    </body>

</html>